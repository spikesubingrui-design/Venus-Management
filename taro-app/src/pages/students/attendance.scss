.attendance-page {
  min-height: 100vh;
  background: #f8fafc;
}

// 单个学生模式
.single-mode {
  padding: 24rpx;
  
  .student-info {
    background: linear-gradient(135deg, #1e293b, #334155);
    padding: 40rpx;
    border-radius: 20rpx;
    margin-bottom: 24rpx;
    
    .name {
      font-size: 44rpx;
      font-weight: bold;
      color: #ffffff;
      display: block;
    }
    
    .class {
      font-size: 28rpx;
      color: #94a3b8;
      margin-top: 8rpx;
    }
  }
  
  .date-picker {
    background: #ffffff;
    border-radius: 16rpx;
    padding: 24rpx;
    margin-bottom: 24rpx;
    
    .picker-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      
      .label {
        font-size: 28rpx;
        color: #64748b;
      }
      
      .value {
        font-size: 28rpx;
        color: #1e293b;
        font-weight: bold;
      }
    }
  }
  
  .section-title {
    font-size: 28rpx;
    font-weight: bold;
    color: #1e293b;
    margin-bottom: 16rpx;
    display: block;
  }
  
  .status-options {
    background: #ffffff;
    border-radius: 16rpx;
    padding: 24rpx;
    margin-bottom: 24rpx;
    
    .status-option {
      display: flex;
      align-items: center;
      padding: 24rpx;
      border-radius: 12rpx;
      margin-bottom: 12rpx;
      background: #f8fafc;
      border: 2rpx solid transparent;
      
      &.active {
        background: #dbeafe;
        border-color: #3b82f6;
      }
      
      &:last-child {
        margin-bottom: 0;
      }
      
      .icon {
        font-size: 36rpx;
        margin-right: 16rpx;
      }
      
      .label {
        flex: 1;
        font-size: 30rpx;
        color: #1e293b;
      }
      
      .check {
        font-size: 28rpx;
        color: #3b82f6;
        font-weight: bold;
      }
      
      &.disabled {
        opacity: 0.4;
        pointer-events: none;
      }
    }
  }
  
  .notes-section {
    background: #ffffff;
    border-radius: 16rpx;
    padding: 24rpx;
    margin-bottom: 32rpx;
    
    .notes-input {
      width: 100%;
      height: 80rpx;
      background: #f8fafc;
      border-radius: 12rpx;
      padding: 0 20rpx;
      font-size: 28rpx;
    }
  }
  
  .submit-btn {
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    padding: 28rpx;
    border-radius: 16rpx;
    text-align: center;
    
    text {
      font-size: 32rpx;
      font-weight: bold;
      color: #ffffff;
    }
    
    &:active {
      opacity: 0.9;
    }
    
    &.disabled {
      background: #94a3b8;
      
      text {
        color: #e2e8f0;
      }
    }
  }
}

// 批量模式
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 24rpx;
  background: #ffffff;
  
  .date-display {
    display: flex;
    align-items: center;
    padding: 16rpx 24rpx;
    background: #f8fafc;
    border-radius: 12rpx;
    
    .date {
      font-size: 30rpx;
      font-weight: bold;
      color: #1e293b;
    }
    
    .arrow {
      font-size: 20rpx;
      color: #94a3b8;
      margin-left: 12rpx;
    }
  }
  
  .header-btns {
    display: flex;
    gap: 16rpx;
  }
  
  .quick-btn {
    padding: 16rpx 24rpx;
    background: #dcfce7;
    border-radius: 12rpx;
    
    text {
      font-size: 26rpx;
      color: #15803d;
      font-weight: bold;
    }
    
    &:active {
      opacity: 0.8;
    }
  }
  
  .submit-btn {
    padding: 16rpx 24rpx;
    background: linear-gradient(135deg, #3b82f6, #2563eb);
    border-radius: 12rpx;
    
    text {
      font-size: 26rpx;
      color: #ffffff;
      font-weight: bold;
    }
    
    &:active {
      opacity: 0.8;
    }
  }
}

.stats-bar {
  display: flex;
  background: #ffffff;
  padding: 20rpx 24rpx;
  border-bottom: 2rpx solid #f1f5f9;
  
  .stat-item {
    flex: 1;
    text-align: center;
    
    .number {
      font-size: 32rpx;
      font-weight: bold;
      color: #22c55e;
      display: block;
      
      &.yellow { color: #eab308; }
      &.red { color: #ef4444; }
      &.orange { color: #f59e0b; }
      &.blue { color: #3b82f6; }
      &.gray { color: #94a3b8; }
    }
    
    .label {
      font-size: 20rpx;
      color: #64748b;
    }
  }
}

.student-list {
  height: calc(100vh - 280rpx);
  padding: 16rpx 24rpx;
}

.class-group {
  margin-bottom: 24rpx;
  
  .class-header {
    display: flex;
    align-items: center;
    padding: 16rpx 0;
    
    .class-name {
      font-size: 28rpx;
      font-weight: bold;
      color: #1e293b;
    }
    
    .count {
      font-size: 22rpx;
      color: #94a3b8;
      margin-left: 12rpx;
      background: #f1f5f9;
      padding: 4rpx 16rpx;
      border-radius: 16rpx;
    }
  }
}

.student-card {
  background: #ffffff;
  border-radius: 12rpx;
  margin-bottom: 12rpx;
  overflow: hidden;
}

.student-row {
  display: flex;
  align-items: center;
  padding: 16rpx 20rpx;
  
  .student-info {
    flex: 1;
    display: flex;
    align-items: center;
    gap: 8rpx;
    
    .name {
      font-size: 28rpx;
      font-weight: bold;
      color: #1e293b;
    }
    
    .current-status {
      font-size: 22rpx;
      
      &.present { color: #22c55e; }
      &.late { color: #eab308; }
      &.absent { color: #ef4444; }
      &.sick { color: #f59e0b; }
      &.leave { color: #3b82f6; }
    }
    
    .has-notes {
      font-size: 20rpx;
    }
  }
  
  .status-btns {
    display: flex;
    gap: 8rpx;
    
    .status-btn {
      width: 48rpx;
      height: 48rpx;
      border-radius: 10rpx;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24rpx;
      background: #f8fafc;
      border: 2rpx solid #e2e8f0;
      
      &.present.active {
        background: #dcfce7;
        border-color: #22c55e;
      }
      
      &.late.active {
        background: #fef9c3;
        border-color: #eab308;
      }
      
      &.absent.active {
        background: #fee2e2;
        border-color: #ef4444;
      }
      
      &.sick.active {
        background: #fef3c7;
        border-color: #f59e0b;
      }
      
      &.leave.active {
        background: #dbeafe;
        border-color: #3b82f6;
      }
      
      &.disabled {
        opacity: 0.4;
        pointer-events: none;
      }
    }
  }
}

.notes-row {
  padding: 0 20rpx 16rpx;
  
  .notes-input {
    width: 100%;
    height: 72rpx;
    background: #f8fafc;
    border-radius: 10rpx;
    padding: 0 20rpx;
    font-size: 26rpx;
    border: 2rpx solid #e2e8f0;
  }
}

// 确认弹窗
.confirm-modal {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1000;
  display: flex;
  align-items: center;
  justify-content: center;
  background: rgba(0, 0, 0, 0.5);
  
  .modal-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.5);
  }
  
  .modal-content {
    position: relative;
    z-index: 1;
    width: 85%;
    max-width: 600rpx;
    background: #ffffff;
    border-radius: 24rpx;
    overflow: visible;
  }
  
  .modal-header {
    padding: 32rpx;
    background: linear-gradient(135deg, #10b981, #059669);
    
    .modal-title {
      font-size: 34rpx;
      font-weight: bold;
      color: #ffffff;
    }
  }
  
  .modal-body {
    padding: 32rpx;
    
    .confirm-date {
      font-size: 28rpx;
      color: #64748b;
      margin-bottom: 24rpx;
      display: block;
    }
    
    .stats-summary {
      background: #f8fafc;
      border-radius: 16rpx;
      padding: 20rpx;
      margin-bottom: 24rpx;
      
      .stat-row {
        display: flex;
        justify-content: space-between;
        padding: 12rpx 0;
        border-bottom: 1rpx solid #e2e8f0;
        
        &:last-child {
          border-bottom: none;
        }
        
        &.total {
          margin-top: 8rpx;
          padding-top: 16rpx;
          border-top: 2rpx solid #cbd5e1;
        }
        
        .stat-label {
          font-size: 26rpx;
          color: #64748b;
        }
        
        .stat-value {
          font-size: 26rpx;
          font-weight: bold;
          color: #1e293b;
          
          &.green { color: #22c55e; }
          &.yellow { color: #eab308; }
          &.orange { color: #f59e0b; }
          &.red { color: #ef4444; }
        }
      }
    }
    
    .non-present-list {
      background: #fef3c7;
      border-radius: 16rpx;
      padding: 20rpx;
      
      .list-title {
        font-size: 24rpx;
        font-weight: bold;
        color: #92400e;
        display: block;
        margin-bottom: 12rpx;
      }
      
      .student-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 12rpx;
        
        .student-tag {
          display: flex;
          align-items: center;
          gap: 8rpx;
          padding: 8rpx 16rpx;
          border-radius: 20rpx;
          font-size: 24rpx;
          font-weight: bold;
          
          &.late {
            background: #fef9c3;
            color: #a16207;
          }
          
          &.absent {
            background: #fee2e2;
            color: #b91c1c;
          }
          
          &.sick {
            background: #ffedd5;
            color: #c2410c;
          }
          
          &.leave {
            background: #dbeafe;
            color: #1d4ed8;
          }
          
          .tag-status {
            font-size: 20rpx;
            opacity: 0.8;
          }
        }
      }
    }
  }
  
  .modal-footer {
    display: flex;
    padding: 24rpx;
    gap: 16rpx;
    background: #f8fafc;
    
    .btn {
      flex: 1;
      padding: 24rpx;
      border-radius: 12rpx;
      text-align: center;
      
      text {
        font-size: 28rpx;
        font-weight: bold;
      }
      
      &.cancel {
        background: #ffffff;
        border: 2rpx solid #e2e8f0;
        
        text {
          color: #64748b;
        }
      }
      
      &.confirm {
        background: linear-gradient(135deg, #10b981, #059669);
        
        text {
          color: #ffffff;
        }
      }
      
      &:active {
        opacity: 0.8;
      }
    }
  }
  
  // 备注弹窗特殊样式
  &.notes-modal {
    max-width: 680rpx;
    
    .modal-header {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }
    
    .student-info-row {
      display: flex;
      align-items: center;
      gap: 16rpx;
      padding: 16rpx 20rpx;
      background: linear-gradient(135deg, #fef3c7, #fde68a);
      border-radius: 16rpx;
      margin-bottom: 24rpx;
      
      .student-name {
        font-size: 32rpx;
        font-weight: 700;
        color: #92400e;
      }
      
      .student-class {
        font-size: 24rpx;
        color: #b45309;
        background: rgba(255,255,255,0.6);
        padding: 6rpx 16rpx;
        border-radius: 20rpx;
      }
    }
    
    // 原因选择区域
    .reason-section {
      margin-bottom: 24rpx;
      
      .reason-title {
        font-size: 26rpx;
        color: #475569;
        font-weight: 600;
        display: block;
        margin-bottom: 16rpx;
      }
      
      .reason-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 12rpx;
      }
      
      .reason-tag {
        padding: 14rpx 24rpx;
        background: #f1f5f9;
        border: 2rpx solid #e2e8f0;
        border-radius: 24rpx;
        transition: all 0.2s ease;
        
        Text {
          font-size: 26rpx;
          color: #64748b;
        }
        
        &.selected {
          background: linear-gradient(135deg, #fef3c7, #fde68a);
          border-color: #f59e0b;
          
          Text {
            color: #92400e;
            font-weight: 600;
          }
        }
        
        &:active {
          transform: scale(0.96);
        }
      }
    }
    
    .notes-input-section {
      margin-top: 20rpx;
      padding-top: 20rpx;
      border-top: 2rpx dashed #e2e8f0;
      
      .input-label {
        font-size: 26rpx;
        color: #64748b;
        display: block;
        margin-bottom: 12rpx;
      }
      
      .notes-input.large {
        background: #f8fafc;
        border: 2rpx solid #e2e8f0;
        border-radius: 16rpx;
        padding: 24rpx;
        font-size: 28rpx;
        width: 100%;
        box-sizing: border-box;
        
        &:focus {
          border-color: #f59e0b;
          background: #fffbeb;
        }
      }
    }
    
    .modal-footer .btn.confirm {
      background: linear-gradient(135deg, #f59e0b, #d97706);
    }
  }
}

// ========== 新的备注弹窗样式 ==========
.notes-modal-wrapper {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 9999;
  display: flex;
  align-items: center;
  justify-content: center;
}

.notes-modal-mask {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.6);
}

.notes-modal-box {
  position: relative;
  width: 90%;
  max-width: 640rpx;
  background: #ffffff;
  border-radius: 24rpx;
  overflow: hidden;
  box-shadow: 0 20rpx 60rpx rgba(0, 0, 0, 0.3);
}

.notes-modal-header {
  padding: 32rpx;
  background: linear-gradient(135deg, #f59e0b, #d97706);
  text-align: center;
  
  .notes-modal-title {
    font-size: 36rpx;
    font-weight: bold;
    color: #ffffff;
    display: block;
  }
  
  .notes-modal-student {
    font-size: 26rpx;
    color: rgba(255, 255, 255, 0.9);
    margin-top: 8rpx;
    display: block;
  }
}

.notes-modal-body {
  padding: 32rpx;
  max-height: 60vh;
  overflow-y: auto;
  
  .notes-section-title {
    font-size: 28rpx;
    font-weight: 600;
    color: #374151;
    display: block;
    margin-bottom: 16rpx;
    margin-top: 16rpx;
    
    &:first-child {
      margin-top: 0;
    }
  }
}

.notes-reason-list {
  display: flex;
  flex-wrap: wrap;
  gap: 16rpx;
  margin-bottom: 24rpx;
}

.notes-reason-item {
  padding: 16rpx 28rpx;
  background: #f3f4f6;
  border: 2rpx solid #e5e7eb;
  border-radius: 32rpx;
  font-size: 28rpx;
  color: #4b5563;
  
  &.active {
    background: linear-gradient(135deg, #fef3c7, #fde68a);
    border-color: #f59e0b;
    color: #92400e;
    font-weight: 600;
  }
}

.notes-text-input {
  width: 100%;
  height: 80rpx;
  padding: 0 24rpx;
  background: #f9fafb;
  border: 2rpx solid #e5e7eb;
  border-radius: 16rpx;
  font-size: 28rpx;
  color: #374151;
  box-sizing: border-box;
}

.notes-modal-footer {
  display: flex;
  border-top: 2rpx solid #e5e7eb;
  
  .notes-btn-cancel,
  .notes-btn-confirm {
    flex: 1;
    padding: 32rpx;
    text-align: center;
    font-size: 32rpx;
    font-weight: 600;
  }
  
  .notes-btn-cancel {
    color: #6b7280;
    border-right: 2rpx solid #e5e7eb;
  }
  
  .notes-btn-confirm {
    color: #f59e0b;
  }
}
