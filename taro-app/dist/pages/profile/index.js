"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[598],{8437:function(e,n,s){var a=s(2180),c=s(1002),t=s(1413),l=s(2688),i=s(7762),r=s(3433),o=s(5861),u=s(9439),h=s(7294),d=s(1515),x=s(2954),m=s.n(x),p=s(4751),f=s(857),v=s(1977),j=s(7724),N=s(4266),g=s(5893);function S(){(0,p.Z)({title:"\u91d1\u661f\u5e7c\u513f\u56ed - \u4e2a\u4eba\u4e2d\u5fc3",path:"/pages/profile/index"});var e=(0,h.useState)(null),n=(0,u.Z)(e,2),s=n[0],a=n[1],x=(0,h.useState)(!1),S=(0,u.Z)(x,2),w=S[0],Z=S[1],y=(0,h.useState)(""),G=(0,u.Z)(y,2),k=G[0],b=G[1],C=(0,h.useState)(!1),I=(0,u.Z)(C,2),_=I[0],T=I[1],O=(0,h.useState)(""),z=(0,u.Z)(O,2),D=z[0],E=z[1],A=(0,h.useState)({isOnline:!1}),H=(0,u.Z)(A,2),P=H[0],L=H[1],M=(0,h.useState)({students:0,staff:0}),F=(0,u.Z)(M,2),R=F[0],U=F[1],B=(0,h.useState)(!1),J=(0,u.Z)(B,2),K=J[0],Y=J[1],q=(0,h.useState)(!1),Q=(0,u.Z)(q,2),V=Q[0],W=Q[1],X=(0,h.useState)([]),$=(0,u.Z)(X,2),ee=$[0],ne=$[1],se=(0,h.useState)(""),ae=(0,u.Z)(se,2),ce=ae[0],te=ae[1],le=(0,h.useState)(""),ie=(0,u.Z)(le,2),re=ie[0],oe=ie[1],ue=(0,h.useState)(null),he=(0,u.Z)(ue,2),de=he[0],xe=he[1],me=(0,h.useState)({}),pe=(0,u.Z)(me,2),fe=pe[0],ve=pe[1];(0,h.useEffect)(function(){je(),ze(),Oe(),Ge()},[]);var je=function(){var e=m().getStorageSync("kt_current_user");e&&(a(e),b(e.name),Y((0,j.GJ)(e)))},Ne=function(e){return"string"===typeof e?e:e.phone},ge=function(e){return"string"===typeof e?"":e.name||""},Se=function(e){return"string"===typeof e?"":e.campus||""},we=function(e){return"string"===typeof e?"":e.position||""},Ze=function(e){return"string"===typeof e?"":e.assignedClass||""},ye=function(e){return"string"===typeof e?"":e.gender||""},Ge=function(){var e=m().getStorageSync("kt_authorized_phones")||[];if(e.length>0&&"string"===typeof e[0]){var n=m().getStorageSync("kt_staff")||[],s=new Map(n.filter(function(e){return e.phone}).map(function(e){return[e.phone.replace(/\D/g,""),e]})),a=e.map(function(e){var n=e.replace(/\D/g,""),a=s.get(n);return a?{phone:n,name:a.name||"",gender:a.gender||"",campus:a.campus||"",position:a.position||a.role||"",assignedClass:a.class||""}:{phone:n}});ne(a)}else ne(e)},ke=function(){var e=(0,o.Z)((0,l.Z)().m(function e(){var n,s,a,c,t,o,u,h,d,x,p;return(0,l.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:if(n=m().getStorageSync("kt_staff")||[],s=m().getStorageSync("kt_teachers")||[],a=n.length>=s.length?n:s,0!==a.length){e.n=1;break}return m().showToast({title:"\u6682\u65e0\u6559\u804c\u5de5\u6570\u636e",icon:"none"}),e.a(2);case 1:c=new Set(ee.map(function(e){return Ne(e)})),t=0,o=(0,r.Z)(ee),u=(0,i.Z)(a),e.p=2,u.s();case 3:if((h=u.n()).done){e.n=7;break}if(d=h.value,d.phone){e.n=4;break}return e.a(3,6);case 4:if(x=d.phone.replace(/\D/g,""),11===x.length&&!c.has(x)){e.n=5;break}return e.a(3,6);case 5:o.push({phone:x,name:d.name||"",gender:d.gender||"",campus:d.campus||"",role:d.role||"TEACHER",position:d.position||d.role||"",assignedClass:Array.isArray(d.assignedClasses)?d.assignedClasses[0]:d.class||"",is_used:!1,created_at:(new Date).toISOString()}),c.add(x),t++;case 6:e.n=3;break;case 7:e.n=9;break;case 8:e.p=8,p=e.v,u.e(p);case 9:return e.p=9,u.f(),e.f(9);case 10:m().setStorageSync("kt_authorized_phones",o),ne(o),v.LC&&(0,v.Hv)(),m().showToast({title:"\u5bfc\u5165 ".concat(t," \u4eba"),icon:"success"});case 11:return e.a(2)}},e,null,[[2,8,9,10]])}));return function(){return e.apply(this,arguments)}}(),be=function(){var e=(0,o.Z)((0,l.Z)().m(function e(){var n,s;return(0,l.Z)().w(function(e){while(1)switch(e.n){case 0:if(ce.trim()){e.n=1;break}return m().showToast({title:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",icon:"none"}),e.a(2);case 1:if(11===ce.length){e.n=2;break}return m().showToast({title:"\u8bf7\u8f93\u516511\u4f4d\u624b\u673a\u53f7",icon:"none"}),e.a(2);case 2:if(!ee.some(function(e){return Ne(e)===ce})){e.n=3;break}return m().showToast({title:"\u8be5\u624b\u673a\u53f7\u5df2\u6388\u6743",icon:"none"}),e.a(2);case 3:n={phone:ce,name:"",campus:"",role:"TEACHER",created_at:(new Date).toISOString()},s=[].concat((0,r.Z)(ee),[n]),m().setStorageSync("kt_authorized_phones",s),ne(s),te(""),v.LC&&(0,v.Hv)().then(function(e){e.success&&console.log("[Profile] \u6388\u6743\u624b\u673a\u53f7\u5df2\u540c\u6b65\u5230\u4e91\u7aef")}),m().showToast({title:"\u6dfb\u52a0\u6210\u529f",icon:"success"});case 4:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),Ce=function(e){var n=ee.find(function(n){return Ne(n)===e}),s=n&&ge(n)?"".concat(ge(n),"(").concat(e,")"):e;m().showModal({title:"\u786e\u8ba4\u5220\u9664",content:"\u786e\u5b9a\u53d6\u6d88 ".concat(s," \u7684\u6ce8\u518c\u6388\u6743\u5417\uff1f"),success:function(n){if(n.confirm){var s=ee.filter(function(n){return Ne(n)!==e});m().setStorageSync("kt_authorized_phones",s),ne(s),v.LC&&(0,v.Hv)().then(function(e){e.success&&console.log("[Profile] \u6388\u6743\u624b\u673a\u53f7\u5220\u9664\u5df2\u540c\u6b65\u5230\u4e91\u7aef")}),m().showToast({title:"\u5df2\u5220\u9664",icon:"success"})}}})},Ie=function(e){var n=Ne(e);xe(n),ve("string"===typeof e?{phone:e}:(0,t.Z)({},e))},_e=function(){if(de){var e=ee.map(function(e){return Ne(e)===de?(0,t.Z)({},fe):e});m().setStorageSync("kt_authorized_phones",e),ne(e),xe(null),ve({}),v.LC&&(0,v.Hv)().then(function(e){e.success&&console.log("[Profile] \u6388\u6743\u4fe1\u606f\u7f16\u8f91\u5df2\u540c\u6b65\u5230\u4e91\u7aef")}),m().showToast({title:"\u5df2\u4fdd\u5b58",icon:"success"})}},Te=function(){xe(null),ve({})},Oe=function(){var e=m().getStorageSync(v.I.STUDENTS)||[],n=m().getStorageSync(v.I.STAFF)||[],s=m().getStorageSync("kt_teachers")||[],a=m().getStorageSync(v.I.AUTHORIZED_PHONES)||[];if(s.length>0){var t=new Set(n.map(function(e){return e.phone||e.id})),l=s.filter(function(e){var n=e.phone||e.id;return n&&!t.has(n)});l.length>0&&(n=[].concat((0,r.Z)(n),(0,r.Z)(l)))}if(a.length>0){var i=new Set(n.map(function(e){return e.phone||e.id})),o=a.filter(function(e){var n="string"===typeof e?e:e.phone,s="object"===(0,c.Z)(e)&&e.role||"";return n&&"PARENT"!==s&&!i.has(n)});o.length>0&&(n=[].concat((0,r.Z)(n),(0,r.Z)(o)))}var u=new Set,h=n.filter(function(e){var n="string"===typeof e?e:e.phone||e.id||e.name;return!(!n||u.has(n))&&(u.add(n),!0)});U({students:e.length,staff:h.length})},ze=function(){var e=(0,o.Z)((0,l.Z)().m(function e(){var n,s,a;return(0,l.Z)().w(function(e){while(1)switch(e.n){case 0:if(n=(0,v.au)(),L(function(e){return(0,t.Z)((0,t.Z)({},e),{},{lastSync:n.lastSyncTime||void 0})}),!v.LC){e.n=2;break}return e.n=1,(0,v.xF)();case 1:s=e.v,L(function(e){return(0,t.Z)((0,t.Z)({},e),{},{isOnline:s.isHealthy,latency:s.latency})}),s.isHealthy&&(a=m().getStorageSync(v.I.STUDENTS)||[],0===a.length&&De());case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}(),De=function(){var e=(0,o.Z)((0,l.Z)().m(function e(){var n,s;return(0,l.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:if(!_){e.n=1;break}return e.a(2);case 1:return T(!0),E("\u81ea\u52a8\u540c\u6b65\u4e2d..."),e.p=2,e.n=3,(0,v.K)();case 3:n=e.v,n.success&&(m().setStorageSync("kt_last_sync_time",(new Date).toISOString()),Oe(),ze()),e.n=5;break;case 4:e.p=4,s=e.v,console.error("[Profile] \u81ea\u52a8\u540c\u6b65\u5931\u8d25:",s);case 5:return e.p=5,T(!1),E(""),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),Ee=function(e){var n={SUPER_ADMIN:"\u8d85\u7ea7\u7ba1\u7406\u5458",admin:"\u7ba1\u7406\u5458",teacher:"\u6559\u5e08",kitchen:"\u53a8\u623f",finance:"\u8d22\u52a1"};return n[e]||e},Ae=function(){if(k.trim()){if(s){var e=(0,t.Z)((0,t.Z)({},s),{},{name:k});m().setStorageSync("kt_current_user",e);var n=m().getStorageSync("kt_all_users")||[],c=n.findIndex(function(e){return e.id===s.id});-1!==c&&(n[c]=e,m().setStorageSync("kt_all_users",n)),a(e),Z(!1),m().showToast({title:"\u4fdd\u5b58\u6210\u529f",icon:"success"})}}else m().showToast({title:"\u59d3\u540d\u4e0d\u80fd\u4e3a\u7a7a",icon:"none"})},He=function(){m().showModal({title:"\u786e\u8ba4\u9000\u51fa",content:"\u786e\u5b9a\u8981\u9000\u51fa\u767b\u5f55\u5417\uff1f",success:function(e){e.confirm&&(m().removeStorageSync("kt_current_user"),m().redirectTo({url:"/pages/login/index"}))}})},Pe=function(){var e=m().getStorageInfoSync();return{currentSize:(e.currentSize/1024).toFixed(2),limitSize:(e.limitSize/1024).toFixed(2)}},Le=Pe(),Me=[{icon:"\ud83d\udcf1",label:"\u6211\u7684\u624b\u673a",value:(null===s||void 0===s?void 0:s.phone)||"-"},{icon:"\ud83c\udfeb",label:"\u6240\u5c5e\u56ed\u6240",value:(null===s||void 0===s?void 0:s.campus)||"\u91d1\u661f\u5e7c\u513f\u56ed"},{icon:"\ud83d\udc64",label:"\u89d2\u8272\u6743\u9650",value:s?Ee(s.role):"-"}];return s?(0,g.jsxs)(d.G7,{className:"profile-page",children:[(0,g.jsxs)(d.G7,{className:"user-card",children:[(0,g.jsx)(d.G7,{className:"avatar",children:(0,g.jsx)(d.xv,{children:s.name.slice(0,1)})}),(0,g.jsxs)(d.G7,{className:"info",children:[w?(0,g.jsxs)(d.G7,{className:"edit-row",children:[(0,g.jsx)(d.II,{className:"name-input",value:k,onInput:function(e){return b(e.detail.value)},focus:!0}),(0,g.jsxs)(d.G7,{className:"edit-btns",children:[(0,g.jsx)(d.xv,{className:"cancel",onClick:function(){Z(!1),b(s.name)},children:"\u53d6\u6d88"}),(0,g.jsx)(d.xv,{className:"save",onClick:Ae,children:"\u4fdd\u5b58"})]})]}):(0,g.jsxs)(d.G7,{className:"name-row",onClick:function(){return Z(!0)},children:[(0,g.jsx)(d.xv,{className:"name",children:s.name}),(0,g.jsx)(d.xv,{className:"edit-icon",children:"\u270f\ufe0f"})]}),(0,g.jsx)(d.xv,{className:"role",children:Ee(s.role)})]})]}),(0,g.jsxs)(d.pf,{className:"content",scrollY:!0,children:[(0,g.jsxs)(d.G7,{className:"section cloud-section",children:[(0,g.jsx)(d.xv,{className:"section-title",children:"\u2601\ufe0f \u6570\u636e\u540c\u6b65"}),(0,g.jsxs)(d.G7,{className:"cloud-status",children:[(0,g.jsxs)(d.G7,{className:"status-row",children:[(0,g.jsx)(d.xv,{className:"label",children:"\u4e91\u7aef\u72b6\u6001"}),(0,g.jsxs)(d.G7,{className:"status-indicator",children:[(0,g.jsx)(d.G7,{className:"dot ".concat(P.isOnline?"online":"offline")}),(0,g.jsx)(d.xv,{className:P.isOnline?"online":"offline",children:v.LC?P.isOnline?"\u5df2\u8fde\u63a5":"\u8fde\u63a5\u4e2d...":"\u672a\u914d\u7f6e"})]})]}),(0,g.jsxs)(d.G7,{className:"status-row",children:[(0,g.jsx)(d.xv,{className:"label",children:"\u672c\u5730\u6570\u636e"}),(0,g.jsxs)(d.xv,{className:"value",children:["\u5b66\u751f ",R.students," \u4eba\uff0c\u6559\u804c\u5de5 ",R.staff," \u4eba"]})]}),P.lastSync&&(0,g.jsxs)(d.G7,{className:"status-row",children:[(0,g.jsx)(d.xv,{className:"label",children:"\u4e0a\u6b21\u540c\u6b65"}),(0,g.jsx)(d.xv,{className:"value",children:new Date(P.lastSync).toLocaleString()})]})]}),_&&(0,g.jsx)(d.G7,{className:"sync-status",children:(0,g.jsxs)(d.xv,{className:"syncing-text",children:["\ud83d\udd04 ",D||"\u540c\u6b65\u4e2d..."]})}),(0,g.jsx)(d.xv,{className:"sync-hint",children:"\u6570\u636e\u4f1a\u5728\u6253\u5f00\u5c0f\u7a0b\u5e8f\u65f6\u81ea\u52a8\u540c\u6b65"})]}),(0,g.jsxs)(d.G7,{className:"section",children:[(0,g.jsx)(d.xv,{className:"section-title",children:"\u57fa\u672c\u4fe1\u606f"}),Me.map(function(e,n){return(0,g.jsxs)(d.G7,{className:"menu-item",children:[(0,g.jsx)(d.xv,{className:"icon",children:e.icon}),(0,g.jsx)(d.xv,{className:"label",children:e.label}),(0,g.jsx)(d.xv,{className:"value",children:e.value})]},n)})]}),(0,g.jsxs)(d.G7,{className:"section",children:[(0,g.jsx)(d.xv,{className:"section-title",children:"\u6d88\u606f\u901a\u77e5"}),(0,g.jsxs)(d.G7,{className:"menu-item clickable",onClick:(0,o.Z)((0,l.Z)().m(function e(){var n;return(0,l.Z)().w(function(e){while(1)switch(e.n){case 0:if((0,f.wq)()){e.n=1;break}return m().showToast({title:"\u901a\u77e5\u6a21\u677f\u914d\u7f6e\u4e2d",icon:"none"}),e.a(2);case 1:return e.n=2,(0,f.bI)();case 2:n=e.v,n.success&&m().showToast({title:"\u8ba2\u9605\u6210\u529f",icon:"success"});case 3:return e.a(2)}},e)})),children:[(0,g.jsx)(d.xv,{className:"icon",children:"\ud83d\udd14"}),(0,g.jsx)(d.xv,{className:"label",children:"\u8ba2\u9605\u6d88\u606f\u63d0\u9192"}),(0,g.jsx)(d.xv,{className:"value",children:"\u8003\u52e4/\u98df\u8c31/\u7f34\u8d39"}),(0,g.jsx)(d.xv,{className:"arrow",children:"\u203a"})]})]}),K&&(0,g.jsxs)(d.G7,{className:"section admin-section",children:[(0,g.jsx)(d.xv,{className:"section-title",children:"\ud83d\udc54 \u7ba1\u7406\u5458\u529f\u80fd"}),(0,g.jsxs)(d.G7,{className:"menu-item clickable",onClick:function(){return(0,N.t)("/pages/staff/index")},children:[(0,g.jsx)(d.xv,{className:"icon",children:"\ud83d\udccb"}),(0,g.jsx)(d.xv,{className:"label",children:"\u73ed\u7ea7\u5206\u914d"}),(0,g.jsx)(d.xv,{className:"arrow",children:"\u203a"})]}),(0,g.jsxs)(d.G7,{className:"menu-item clickable",onClick:function(){return W(!0)},children:[(0,g.jsx)(d.xv,{className:"icon",children:"\ud83d\udcf1"}),(0,g.jsx)(d.xv,{className:"label",children:"\u6388\u6743\u624b\u673a\u53f7"}),(0,g.jsxs)(d.xv,{className:"value",children:[ee.length," \u4e2a"]}),(0,g.jsx)(d.xv,{className:"arrow",children:"\u203a"})]})]}),(0,g.jsxs)(d.G7,{className:"section",children:[(0,g.jsx)(d.xv,{className:"section-title",children:"\u8bbe\u7f6e"}),(0,g.jsxs)(d.G7,{className:"menu-item",children:[(0,g.jsx)(d.xv,{className:"icon",children:"\ud83d\udce6"}),(0,g.jsx)(d.xv,{className:"label",children:"\u5b58\u50a8\u7a7a\u95f4"}),(0,g.jsxs)(d.xv,{className:"value",children:[Le.currentSize,"KB / ",Le.limitSize,"KB"]})]}),(0,g.jsxs)(d.G7,{className:"menu-item",children:[(0,g.jsx)(d.xv,{className:"icon",children:"\u2139\ufe0f"}),(0,g.jsx)(d.xv,{className:"label",children:"\u7248\u672c"}),(0,g.jsx)(d.xv,{className:"value",children:"v1.1.3"})]})]}),(0,g.jsx)(d.G7,{className:"logout-btn",onClick:He,children:(0,g.jsx)(d.xv,{children:"\u9000\u51fa\u767b\u5f55"})}),(0,g.jsx)(d.G7,{style:{height:"100rpx"}})]}),V&&(0,g.jsxs)(d.G7,{className:"phone-modal-wrapper",children:[(0,g.jsx)(d.G7,{className:"phone-modal-mask",onClick:function(){return W(!1)}}),(0,g.jsxs)(d.G7,{className:"phone-modal-box",children:[(0,g.jsxs)(d.G7,{className:"phone-modal-header",children:[(0,g.jsx)(d.xv,{className:"phone-modal-title",children:"\ud83d\udcf1 \u6388\u6743\u540d\u5355\u7ba1\u7406"}),(0,g.jsx)(d.xv,{className:"phone-modal-close",onClick:function(){return W(!1)},children:"\u2715"})]}),(0,g.jsxs)(d.G7,{className:"phone-modal-body",children:[(0,g.jsxs)(d.xv,{className:"phone-hint",children:["\u53ea\u6709\u6388\u6743\u540d\u5355\u5185\u7684\u624b\u673a\u53f7\u624d\u80fd\u6ce8\u518c\uff0c\u5171 ",ee.length," \u4eba"]}),(0,g.jsx)(d.G7,{className:"phone-add-row",children:(0,g.jsx)(d.xv,{className:"phone-import-btn",onClick:ke,children:"\u4ece\u6559\u804c\u5de5\u5bfc\u5165"})}),(0,g.jsxs)(d.G7,{className:"phone-add-row",children:[(0,g.jsx)(d.II,{className:"phone-input",type:"number",placeholder:"\u8f93\u516511\u4f4d\u624b\u673a\u53f7",value:ce,onInput:function(e){return te(e.detail.value)},maxlength:11}),(0,g.jsx)(d.xv,{className:"phone-add-btn",onClick:be,children:"\u6dfb\u52a0"})]}),(0,g.jsx)(d.G7,{className:"phone-add-row",children:(0,g.jsx)(d.II,{className:"phone-input",type:"text",placeholder:"\u641c\u7d22\u59d3\u540d/\u624b\u673a\u53f7/\u56ed\u533a...",value:re,onInput:function(e){return oe(e.detail.value)}})}),(0,g.jsx)(d.pf,{className:"phone-list",scrollY:!0,children:0===ee.length?(0,g.jsxs)(d.G7,{className:"phone-empty",children:[(0,g.jsx)(d.xv,{children:"\u6682\u65e0\u6388\u6743\u540d\u5355"}),(0,g.jsx)(d.xv,{className:"phone-empty-hint",children:'\u70b9\u51fb"\u4ece\u6559\u804c\u5de5\u5bfc\u5165"\u6279\u91cf\u6dfb\u52a0'})]}):ee.filter(function(e){if(!re)return!0;var n=re.toLowerCase();return Ne(e).includes(n)||ge(e).includes(n)||Se(e).includes(n)||Ze(e).includes(n)}).map(function(e){var n=Ne(e),s=ge(e),a=Se(e),c=we(e),l=Ze(e),i=ye(e),r=de===n;return r?(0,g.jsx)(d.G7,{className:"phone-item editing",children:(0,g.jsxs)(d.G7,{className:"phone-edit-form",children:[(0,g.jsxs)(d.G7,{className:"phone-edit-row",children:[(0,g.jsx)(d.xv,{className:"phone-edit-label",children:"\u59d3\u540d"}),(0,g.jsx)(d.II,{className:"phone-edit-input",value:fe.name||"",onInput:function(e){return ve((0,t.Z)((0,t.Z)({},fe),{},{name:e.detail.value}))},placeholder:"\u59d3\u540d"})]}),(0,g.jsxs)(d.G7,{className:"phone-edit-row",children:[(0,g.jsx)(d.xv,{className:"phone-edit-label",children:"\u6027\u522b"}),(0,g.jsxs)(d.G7,{className:"phone-edit-radio-group",children:[(0,g.jsx)(d.xv,{className:"phone-edit-radio ".concat("\u5973"===fe.gender?"active":""),onClick:function(){return ve((0,t.Z)((0,t.Z)({},fe),{},{gender:"\u5973"}))},children:"\u5973"}),(0,g.jsx)(d.xv,{className:"phone-edit-radio ".concat("\u7537"===fe.gender?"active":""),onClick:function(){return ve((0,t.Z)((0,t.Z)({},fe),{},{gender:"\u7537"}))},children:"\u7537"})]})]}),(0,g.jsxs)(d.G7,{className:"phone-edit-row",children:[(0,g.jsx)(d.xv,{className:"phone-edit-label",children:"\u56ed\u533a"}),(0,g.jsx)(d.II,{className:"phone-edit-input",value:fe.campus||"",onInput:function(e){return ve((0,t.Z)((0,t.Z)({},fe),{},{campus:e.detail.value}))},placeholder:"\u56ed\u533a"})]}),(0,g.jsxs)(d.G7,{className:"phone-edit-row",children:[(0,g.jsx)(d.xv,{className:"phone-edit-label",children:"\u804c\u52a1"}),(0,g.jsx)(d.II,{className:"phone-edit-input",value:fe.position||"",onInput:function(e){return ve((0,t.Z)((0,t.Z)({},fe),{},{position:e.detail.value}))},placeholder:"\u804c\u52a1"})]}),(0,g.jsxs)(d.G7,{className:"phone-edit-row",children:[(0,g.jsx)(d.xv,{className:"phone-edit-label",children:"\u73ed\u7ea7"}),(0,g.jsx)(d.II,{className:"phone-edit-input",value:fe.assignedClass||"",onInput:function(e){return ve((0,t.Z)((0,t.Z)({},fe),{},{assignedClass:e.detail.value}))},placeholder:"\u73ed\u7ea7"})]}),(0,g.jsxs)(d.G7,{className:"phone-edit-actions",children:[(0,g.jsx)(d.xv,{className:"phone-edit-save",onClick:_e,children:"\u2713 \u4fdd\u5b58"}),(0,g.jsx)(d.xv,{className:"phone-edit-cancel",onClick:Te,children:"\u2715 \u53d6\u6d88"})]})]})},n):(0,g.jsxs)(d.G7,{className:"phone-item",children:[(0,g.jsxs)(d.G7,{className:"phone-info",children:[(0,g.jsxs)(d.G7,{className:"phone-name-row",children:[(0,g.jsx)(d.xv,{className:"phone-person-name",children:s||"\u672a\u586b\u5199"}),i&&(0,g.jsx)(d.xv,{className:"phone-gender ".concat("\u7537"===i?"male":"female"),children:i})]}),(0,g.jsx)(d.xv,{className:"phone-number",children:n}),(0,g.jsxs)(d.G7,{className:"phone-tags",children:[a&&(0,g.jsx)(d.xv,{className:"phone-tag campus",children:a}),c&&(0,g.jsx)(d.xv,{className:"phone-tag position",children:c}),l&&(0,g.jsx)(d.xv,{className:"phone-tag cls",children:l})]})]}),(0,g.jsxs)(d.G7,{className:"phone-actions",children:[(0,g.jsx)(d.xv,{className:"phone-edit",onClick:function(){return Ie(e)},children:"\u7f16\u8f91"}),(0,g.jsx)(d.xv,{className:"phone-delete",onClick:function(){return Ce(n)},children:"\u5220\u9664"})]})]},n)})})]})]})]})]}):(0,g.jsx)(d.G7,{className:"profile-page",children:(0,g.jsxs)(d.G7,{className:"not-logged",children:[(0,g.jsx)(d.xv,{className:"icon",children:"\ud83d\udc64"}),(0,g.jsx)(d.xv,{className:"text",children:"\u672a\u767b\u5f55"}),(0,g.jsx)(d.G7,{className:"login-btn",onClick:function(){return m().redirectTo({url:"/pages/login/index"})},children:(0,g.jsx)(d.xv,{children:"\u53bb\u767b\u5f55"})})]})})}var w={navigationBarTitleText:"\u6211\u7684",enableShareAppMessage:!0,enableShareTimeline:!0};S.enableShareTimeline=!0,S.enableShareAppMessage=!0;Page((0,a.createPageConfig)(S,"pages/profile/index",{root:{cn:[]}},w||{}))}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[107,216,592],function(){return n(8437)});e.O()}]);