"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[882],{5437:function(e,n,s){var a=s(2180),i=s(3433),r=s(9439),t=s(2688),l=s(1413),c=s(5861),m=s(7294),d=s(1515),o=s(2954),u=s.n(o),h=s(4751),x=s(1977),v=s(857),N=s(7724),g=s(4818),p=s(5893),j={energy:{min:1200,max:1400,unit:"kcal",label:"\u80fd\u91cf"},protein:{min:40,max:55,unit:"g",label:"\u86cb\u767d\u8d28"},fat:{min:40,max:50,unit:"g",label:"\u8102\u80aa"},carbohydrate:{min:150,max:200,unit:"g",label:"\u78b3\u6c34\u5316\u5408\u7269"},calcium:{min:600,max:800,unit:"mg",label:"\u9499"},iron:{min:10,max:12,unit:"mg",label:"\u94c1"},zinc:{min:8,max:10,unit:"mg",label:"\u950c"},vitaminA:{min:400,max:500,unit:"\u03bcg",label:"\u7ef4\u751f\u7d20A"},vitaminC:{min:50,max:70,unit:"mg",label:"\u7ef4\u751f\u7d20C"},vitaminD:{min:10,max:15,unit:"\u03bcg",label:"\u7ef4\u751f\u7d20D"}},f={PHUI:{name:"\u666e\u60e0\u56ed"},HIGH_END:{name:"\u9ad8\u7aef\u56ed"},JIU_YOU:{name:"\u4e5d\u5e7c"},SHIQI_YOU:{name:"\u5341\u4e03\u5e7c"}},G=function(e){switch(e){case"PHUI":return"\u3010\u666e\u60e0\u56ed\u6807\u51c6\u3011\u8425\u517b\u5747\u8861\uff0c\u98df\u6750\u7ecf\u6d4e\u5b9e\u60e0";case"HIGH_END":return"\u3010\u9ad8\u7aef\u56ed\u6807\u51c6\u3011\u65e9\u9910\u540e\u6c34\u679c\u52a0\u9910\uff0c\u5348\u70b9\u7cbe\u81f4\u751c\u54c1";case"JIU_YOU":case"SHIQI_YOU":return"\u3010".concat(f[e].name,"\u7279\u8272\u3011\u4e30\u5bcc\u6c34\u679c\u52a0\u9910\uff0c\u5468\u4e94\u81ea\u52a9\u9910");default:return""}},k=function(){var e=(0,c.Z)((0,t.Z)().m(function e(n,s,a,i){var r,c,m,d,o,h,x,v,N,g,p;return(0,t.Z)().w(function(e){while(1)switch(e.n){case 0:if(c="",c){e.n=1;break}throw new Error("API Key\u672a\u914d\u7f6e");case 1:return m=G(n),d="\u5e7c\u513f\u56ed\u8425\u517b\u5e08\uff0c\u4e3a\u3010".concat(f[n].name,"\u3011\u751f\u6210\u5468\u4e00\u81f3\u5468\u4e94\u98df\u8c31\u3002").concat(m,'\n\u8fd4\u56deJSON\u683c\u5f0f\uff1a\n{\n  "days":[{\n    "day":"\u5468\u4e00",\n    "meals":{\n      "breakfast":{\n        "staple":{"dishName":"\u4e3b\u98df\u540d","ingredients":[{"name":"\u98df\u6750","perPersonGrams":\u6570\u5b57}]},\n        "sideDish":{"dishName":"\u914d\u83dc\u540d","ingredients":[]},\n        "porridge":{"dishName":"\u7ca5/\u6c64\u540d","ingredients":[]}\n      },\n      "morningSnack":{"dishName":"\u4e0a\u5348\u70b9\u5fc3","ingredients":[]},\n      "lunch":{\n        "mainDish":{"dishName":"\u4e3b\u83dc","ingredients":[]},\n        "sideDish":{"dishName":"\u526f\u83dc","ingredients":[]},\n        "soup":{"dishName":"\u6c64\u54c1","ingredients":[]},\n        "staple":{"dishName":"\u4e3b\u98df","ingredients":[]}\n      },\n      "milkSnack":{"dishName":"\u7eaf\u725b\u5976","ingredients":[{"name":"\u725b\u5976","perPersonGrams":250}]},\n      "afternoonSnack":{\n        "pastry":{"dishName":"\u7cd5\u70b9\u540d","ingredients":[]},\n        "fruit":{"dishName":"\u6c34\u679c\u540d","ingredients":[]}\n      },\n      "dinner":{"dishName":"\u665a\u9910","ingredients":[]}\n    }\n  }],\n  "nutritionSummary":{"avgEnergy":1350,"avgProtein":45,"varietyCount":30}\n}\n\u8981\u6c42\uff1a\u65e9\u9910\u5206\u4e09\u90e8\u5206(\u4e3b\u98df+\u914d\u83dc+\u7ca5)\uff0c\u4e0b\u5348\u70b9\u5fc3\u5206\u4e24\u90e8\u5206(\u7cd5\u70b9+\u6c34\u679c)\uff0c\u6bcf\u9053\u83dc\u542b\u98df\u6750\u548c\u514b\u91cd\uff0c\u4e94\u5929\u4e0d\u91cd\u590d\u3002'),o="\u751f\u6210".concat(f[n].name,"\u672c\u5468\u98df\u8c31(").concat(s,"\u4eba)\uff0c\u53ea\u8fd4\u56deJSON\u3002"),e.n=2,u().request({url:"https://ark.cn-beijing.volces.com/api/v3/chat/completions",method:"POST",header:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c)},data:{model:"doubao-seed-1-6-251015",messages:[{role:"system",content:d},{role:"user",content:o}],temperature:.6,max_completion_tokens:4096,response_format:{type:"json_object"}}});case 2:return h=e.v,x=(null===(r=h.data)||void 0===r||null===(r=r.choices)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.message)||void 0===r||null===(r=r.content)||void 0===r?void 0:r.trim())||"",v=x.replace(/```json\s*/g,"").replace(/```\s*/g,"").trim(),N=JSON.parse(v),g=["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94"],p={id:Date.now().toString(),weekRange:"".concat(a," ~ ").concat(i),startDate:a,endDate:i,grade:n,headcount:s,days:(N.days||[]).map(function(e,n){var s,a=P(g[n]||"\u672a\u77e5");return(0,l.Z)((0,l.Z)((0,l.Z)({},a),e),{},{meals:(0,l.Z)((0,l.Z)((0,l.Z)({},a.meals),e.meals||{}),{},{lunch:(0,l.Z)((0,l.Z)({},a.meals.lunch),(null===(s=e.meals)||void 0===s?void 0:s.lunch)||{})})})}),nutritionSummary:N.nutritionSummary||{avgEnergy:1350,avgProtein:50,varietyCount:15},status:"DRAFT",createdAt:(new Date).toISOString()},e.a(2,p)}},e)}));return function(n,s,a,i){return e.apply(this,arguments)}}(),P=function(e){return{day:e,meals:{breakfast:{staple:{dishName:"\u5f85\u5b9a",ingredients:[]},sideDish:{dishName:"\u5f85\u5b9a",ingredients:[]},porridge:{dishName:"\u5f85\u5b9a",ingredients:[]}},morningSnack:{dishName:"\u5f85\u5b9a",ingredients:[]},lunch:{mainDish:{dishName:"\u5f85\u5b9a",ingredients:[]},sideDish:{dishName:"\u5f85\u5b9a",ingredients:[]},soup:{dishName:"\u5f85\u5b9a",ingredients:[]},staple:{dishName:"\u5f85\u5b9a",ingredients:[]}},milkSnack:{dishName:"\u7eaf\u725b\u5976",ingredients:[{name:"\u725b\u5976",perPersonGrams:250}]},afternoonSnack:{pastry:{dishName:"\u5f85\u5b9a",ingredients:[]},fruit:{dishName:"\u5f85\u5b9a",ingredients:[]}},dinner:{dishName:"\u5f85\u5b9a",ingredients:[]}}}},y=function(e,n,s,a){var i=function(e,n){return{dishName:e,ingredients:n}},r=[{day:"\u5468\u4e00",meals:{breakfast:{staple:i("\u9ad8\u7cb1\u7a9d\u7a9d\u5934",[{name:"\u9762\u7c89",perPersonGrams:28},{name:"\u9ad8\u7cb1\u9762",perPersonGrams:3}]),sideDish:i("\u6d0b\u8471\u6728\u8033\u7092\u86cb",[{name:"\u9e21\u86cb",perPersonGrams:30},{name:"\u6d0b\u8471",perPersonGrams:20},{name:"\u6728\u8033",perPersonGrams:10}]),porridge:i("\u7ea2\u67a3\u5c0f\u7c73\u7ca5",[{name:"\u5c0f\u7c73",perPersonGrams:20},{name:"\u7ea2\u67a3",perPersonGrams:10}])},morningSnack:i("\u65f6\u4ee4\u6c34\u679c",[{name:"\u82f9\u679c",perPersonGrams:80}]),lunch:{mainDish:i("\u9c7c\u9999\u8089\u4e1d",[{name:"\u91cc\u810a\u8089",perPersonGrams:30},{name:"\u80e1\u841d\u535c",perPersonGrams:45}]),sideDish:i("\u6d77\u7c73\u51ac\u74dc",[{name:"\u6d77\u7c73",perPersonGrams:2},{name:"\u51ac\u74dc",perPersonGrams:80}]),soup:i("\u897f\u7ea2\u67ff\u86cb\u82b1\u6c64",[{name:"\u897f\u7ea2\u67ff",perPersonGrams:15},{name:"\u9e21\u86cb",perPersonGrams:10}]),staple:i("\u91d1\u94f6\u996d",[{name:"\u5927\u7c73",perPersonGrams:55},{name:"\u5c0f\u7c73",perPersonGrams:5}])},milkSnack:i("\u7eaf\u725b\u5976",[{name:"\u725b\u5976",perPersonGrams:250}]),afternoonSnack:{pastry:i("\u5357\u74dc\u751c\u751c\u5708",[{name:"\u9762\u7c89",perPersonGrams:20},{name:"\u5357\u74dc",perPersonGrams:15}]),fruit:i("\u706b\u9f99\u679c",[{name:"\u706b\u9f99\u679c",perPersonGrams:80}])},dinner:i("\u6cb9\u83dc\u70e7\u8c46\u8150",[{name:"\u6cb9\u83dc",perPersonGrams:40},{name:"\u8c46\u8150",perPersonGrams:30}])}},{day:"\u5468\u4e8c",meals:{breakfast:{staple:i("\u5343\u5c42\u997c",[{name:"\u9762\u7c89",perPersonGrams:28}]),sideDish:i("\u4e94\u9999\u9e4c\u9e51\u86cb",[{name:"\u9e4c\u9e51\u86cb",perPersonGrams:30}]),porridge:i("\u897f\u7ea2\u67ff\u7599\u7629\u6c64",[{name:"\u9762\u7c89",perPersonGrams:15},{name:"\u897f\u7ea2\u67ff",perPersonGrams:20}])},morningSnack:i("\u65f6\u4ee4\u6c34\u679c",[{name:"\u9999\u8549",perPersonGrams:80}]),lunch:{mainDish:i("\u849c\u84c9\u7c89\u4e1d\u867e",[{name:"\u5927\u867e",perPersonGrams:45},{name:"\u7c89\u4e1d",perPersonGrams:5}]),sideDish:i("\u918b\u6e9c\u571f\u8c46\u4e1d",[{name:"\u571f\u8c46",perPersonGrams:50}]),soup:i("\u7ea2\u8c46\u858f\u4ec1\u6c64",[{name:"\u7ea2\u8c46",perPersonGrams:8},{name:"\u858f\u4ec1",perPersonGrams:6}]),staple:i("\u9999\u7c73\u996d",[{name:"\u5927\u7c73",perPersonGrams:60}])},milkSnack:i("\u7eaf\u725b\u5976",[{name:"\u725b\u5976",perPersonGrams:250}]),afternoonSnack:{pastry:i("\u8774\u8776\u5377",[{name:"\u9762\u7c89",perPersonGrams:23}]),fruit:i("\u82f9\u679c",[{name:"\u82f9\u679c",perPersonGrams:80}])},dinner:i("\u8089\u6cab\u7092\u5305\u83dc\u4e1d",[{name:"\u540e\u817f\u8089",perPersonGrams:20},{name:"\u5305\u83dc",perPersonGrams:65}])}},{day:"\u5468\u4e09",meals:{breakfast:{staple:i("\u8089\u84c9\u5377",[{name:"\u9762\u7c89",perPersonGrams:28},{name:"\u8089\u84c9",perPersonGrams:15}]),sideDish:i("\u51c9\u62cc\u9ec4\u74dc",[{name:"\u9ec4\u74dc",perPersonGrams:40}]),porridge:i("\u8425\u517b\u8c46\u6d46",[{name:"\u9ec4\u8c46",perPersonGrams:15}])},morningSnack:i("\u65f6\u4ee4\u6c34\u679c",[{name:"\u6a59\u5b50",perPersonGrams:80}]),lunch:{mainDish:i("\u84b8\u5364\u9762",[{name:"\u9762\u6761",perPersonGrams:85},{name:"\u540e\u817f\u8089",perPersonGrams:30}]),sideDish:i("\u869d\u6cb9\u751f\u83dc",[{name:"\u751f\u83dc",perPersonGrams:70}]),soup:i("\u51e4\u51f0\u7389\u7c73\u7fb9",[{name:"\u7389\u7c73\u7cc1",perPersonGrams:15},{name:"\u9e21\u86cb",perPersonGrams:10}]),staple:i("\u5364\u9e21\u809d",[{name:"\u9e21\u809d",perPersonGrams:35}])},milkSnack:i("\u7eaf\u725b\u5976",[{name:"\u725b\u5976",perPersonGrams:250}]),afternoonSnack:{pastry:i("\u7ea2\u8c46\u5305",[{name:"\u9762\u7c89",perPersonGrams:25},{name:"\u7ea2\u8c46",perPersonGrams:10}]),fruit:i("\u897f\u74dc",[{name:"\u897f\u74dc",perPersonGrams:120}])},dinner:i("\u65f6\u852c\u7092\u86cb",[{name:"\u9e21\u86cb",perPersonGrams:40},{name:"\u80e1\u841d\u535c",perPersonGrams:15}])}},{day:"\u5468\u56db",meals:{breakfast:{staple:i("\u7ea2\u7cd6\u67a3\u7cd5",[{name:"\u9762\u7c89",perPersonGrams:28},{name:"\u7ea2\u67a3",perPersonGrams:8}]),sideDish:i("\u7d20\u7092\u80e1\u841d\u535c\u4e1d",[{name:"\u80e1\u841d\u535c",perPersonGrams:30}]),porridge:i("\u71d5\u9ea6\u7ca5",[{name:"\u71d5\u9ea6",perPersonGrams:10},{name:"\u5927\u7c73",perPersonGrams:15}])},morningSnack:i("\u65f6\u4ee4\u6c34\u679c",[{name:"\u8461\u8404",perPersonGrams:80}]),lunch:{mainDish:i("\u6392\u9aa8\u7096\u80e1\u841d\u535c",[{name:"\u6392\u9aa8",perPersonGrams:90},{name:"\u80e1\u841d\u535c",perPersonGrams:45}]),sideDish:i("\u8304\u5b50\u70e7\u8c46\u89d2\u4e1d",[{name:"\u8304\u5b50",perPersonGrams:45},{name:"\u8c46\u89d2",perPersonGrams:25}]),soup:i("\u82b9\u83dc\u7092\u8c46\u5e72",[{name:"\u82b9\u83dc",perPersonGrams:50},{name:"\u9999\u5e72",perPersonGrams:10}]),staple:i("\u5200\u5207\u9992\u5934",[{name:"\u9762\u7c89",perPersonGrams:60}])},milkSnack:i("\u7eaf\u725b\u5976",[{name:"\u725b\u5976",perPersonGrams:250}]),afternoonSnack:{pastry:i("\u5976\u9999\u5305",[{name:"\u9762\u7c89",perPersonGrams:20},{name:"\u725b\u5976",perPersonGrams:10}]),fruit:i("\u9999\u8549",[{name:"\u9999\u8549",perPersonGrams:110}])},dinner:i("\u65f6\u852c\u6c64",[{name:"\u897f\u7ea2\u67ff",perPersonGrams:20},{name:"\u9752\u83dc",perPersonGrams:20}])}},{day:"\u5468\u4e94",meals:{breakfast:{staple:i("\u5976\u9999\u9992\u5934",[{name:"\u9762\u7c89",perPersonGrams:28}]),sideDish:i("\u7092\u5408\u83dc",[{name:"\u7eff\u8c46\u82bd",perPersonGrams:40},{name:"\u97ed\u83dc",perPersonGrams:25}]),porridge:i("\u7d2b\u7c73\u7ca5",[{name:"\u7d2b\u7c73",perPersonGrams:20}])},morningSnack:i("\u65f6\u4ee4\u6c34\u679c",[{name:"\u706b\u9f99\u679c",perPersonGrams:80}]),lunch:{mainDish:i("\u897f\u846b\u82a6\u7092\u8089\u4e1d",[{name:"\u897f\u846b\u82a6",perPersonGrams:75},{name:"\u4e94\u82b1\u8089",perPersonGrams:30}]),sideDish:i("\u7d20\u4e09\u9c9c",[{name:"\u80e1\u841d\u535c",perPersonGrams:45},{name:"\u9e21\u86cb",perPersonGrams:30}]),soup:i("\u7eff\u8c46\u6c64",[{name:"\u7eff\u8c46",perPersonGrams:15}]),staple:i("\u7d20\u4e09\u9c9c\u5305\u5b50",[{name:"\u9762\u7c89",perPersonGrams:60}])},milkSnack:i("\u7eaf\u725b\u5976",[{name:"\u725b\u5976",perPersonGrams:250}]),afternoonSnack:{pastry:i("\u84b8\u7389\u7c73",[{name:"\u9c9c\u7389\u7c73",perPersonGrams:140}]),fruit:i("\u6cb9\u6843",[{name:"\u6cb9\u6843",perPersonGrams:80}])},dinner:i("\u65f6\u852c\u9762",[{name:"\u9762\u6761",perPersonGrams:60},{name:"\u9752\u83dc",perPersonGrams:30}])}}];return{id:"ai-"+Date.now(),weekRange:"".concat(s," ~ ").concat(a),startDate:s,endDate:a,grade:e,headcount:n,days:r,nutritionSummary:{avgEnergy:1350,avgProtein:50,varietyCount:35},status:"DRAFT",createdAt:(new Date).toISOString()}};function S(){var e,n;(0,h.Z)({title:"\u91d1\u661f\u5e7c\u513f\u56ed - \u53a8\u623f\u7ba1\u7406",path:"/pages/kitchen/index"});var s=(0,m.useState)([]),a=(0,r.Z)(s,2),G=a[0],P=a[1],S=(0,m.useState)(null),b=(0,r.Z)(S,2),w=b[0],D=b[1],I=(0,m.useState)(0),Z=(0,r.Z)(I,2),C=Z[0],_=Z[1],A=(0,m.useState)("current"),O=(0,r.Z)(A,2),E=O[0],T=O[1],F=(0,m.useState)(!0),M=(0,r.Z)(F,2),K=M[0],R=M[1],H=(0,m.useState)(!1),L=(0,r.Z)(H,2),U=L[0],J=L[1],Y=(0,m.useState)("SHIQI_YOU"),Q=(0,r.Z)(Y,2),B=Q[0],W=Q[1],z=(0,m.useState)(120),q=(0,r.Z)(z,2),V=q[0],X=q[1],$=(0,m.useState)(null),ee=(0,r.Z)($,2),ne=ee[0],se=ee[1],ae=(0,m.useState)(!1),ie=(0,r.Z)(ae,2),re=ie[0],te=ie[1],le=(0,m.useState)(0),ce=(0,r.Z)(le,2),me=ce[0],de=ce[1],oe=(0,m.useState)(""),ue=(0,r.Z)(oe,2),he=ue[0],xe=ue[1],ve=(0,m.useState)(""),Ne=(0,r.Z)(ve,2),ge=Ne[0],pe=Ne[1],je=(0,m.useState)(!1),fe=(0,r.Z)(je,2),Ge=fe[0],ke=fe[1],Pe=(0,m.useState)(null),ye=(0,r.Z)(Pe,2),Se=ye[0],be=ye[1],we=(0,m.useState)(""),De=(0,r.Z)(we,2),Ie=De[0],Ze=De[1],Ce=(0,m.useState)(""),_e=(0,r.Z)(Ce,2),Ae=_e[0],Oe=_e[1],Ee=(0,m.useState)(""),Te=(0,r.Z)(Ee,2),Fe=Te[0],Me=Te[1],Ke=(0,m.useState)(0),Re=(0,r.Z)(Ke,2),He=Re[0],Le=Re[1],Ue=(0,m.useState)(!1),Je=(0,r.Z)(Ue,2),Ye=Je[0],Qe=Je[1],Be=(0,m.useState)(!1),We=(0,r.Z)(Be,2),ze=We[0],qe=We[1],Ve=(0,m.useState)(!1),Xe=(0,r.Z)(Ve,2),$e=Xe[0],en=Xe[1],nn=["\u5468\u4e00","\u5468\u4e8c","\u5468\u4e09","\u5468\u56db","\u5468\u4e94"],sn=function(){var e=new Date,n=e.getDay(),s=new Date(e);s.setDate(e.getDate()-(0===n?6:n-1));var a=new Date(s);a.setDate(s.getDate()+4),xe(s.toISOString().split("T")[0]),pe(a.toISOString().split("T")[0])},an=function(){var e=(new Date).getDay();return e>=1&&e<=5?e-1:0},rn=function(){var e=(new Date).toISOString().split("T")[0],n=u().getStorageSync("kt_attendance_".concat(e))||{},s=Object.values(n).filter(function(e){return"present"===e.status||"late"===e.status}).length;return Le(s),s>0&&X(s),s},tn=(0,m.useMemo)(function(){var e,n,s,a,i,t,l,c,m,d=ne||w;if(!d||!d.days)return[];var o=ne?me:C,u=d.days[o];if(!u||!u.meals)return[];var h=He>0?He:d.headcount,x={},v=function(e){null!==e&&void 0!==e&&e.ingredients&&e.ingredients.forEach(function(e){var n=e.perPersonGrams*h;x[e.name]=(x[e.name]||0)+n})},N=u.meals;return v(null===(e=N.breakfast)||void 0===e?void 0:e.staple),v(null===(n=N.breakfast)||void 0===n?void 0:n.sideDish),v(null===(s=N.breakfast)||void 0===s?void 0:s.porridge),v(N.morningFruitSnack),v(N.morningSnack),v(null===(a=N.lunch)||void 0===a?void 0:a.mainDish),v(null===(i=N.lunch)||void 0===i?void 0:i.sideDish),v(null===(t=N.lunch)||void 0===t?void 0:t.soup),v(null===(l=N.lunch)||void 0===l?void 0:l.staple),v(N.milkSnack),v(null===(c=N.afternoonSnack)||void 0===c?void 0:c.pastry),v(null===(m=N.afternoonSnack)||void 0===m?void 0:m.fruit),v(N.dinner),Object.entries(x).map(function(e){var n=(0,r.Z)(e,2),s=n[0],a=n[1];return{name:s,grams:Math.round(a),kg:(a/1e3).toFixed(2)}}).sort(function(e,n){return n.grams-e.grams})},[ne,w,me,C,He]),ln=(0,m.useMemo)(function(){var e=ne||w;if(!e||!e.days)return[];var n=He>0?He:e.headcount,s={},a=function(e){null!==e&&void 0!==e&&e.ingredients&&e.ingredients.forEach(function(e){var a=e.perPersonGrams*n;s[e.name]=(s[e.name]||0)+a})};return e.days.forEach(function(e){var n,s,i,r,t,l,c,m,d;if(null!==e&&void 0!==e&&e.meals){var o=e.meals;a(null===(n=o.breakfast)||void 0===n?void 0:n.staple),a(null===(s=o.breakfast)||void 0===s?void 0:s.sideDish),a(null===(i=o.breakfast)||void 0===i?void 0:i.porridge),a(o.morningFruitSnack),a(o.morningSnack),a(null===(r=o.lunch)||void 0===r?void 0:r.mainDish),a(null===(t=o.lunch)||void 0===t?void 0:t.sideDish),a(null===(l=o.lunch)||void 0===l?void 0:l.soup),a(null===(c=o.lunch)||void 0===c?void 0:c.staple),a(o.milkSnack),a(null===(m=o.afternoonSnack)||void 0===m?void 0:m.pastry),a(null===(d=o.afternoonSnack)||void 0===d?void 0:d.fruit),a(o.afternoonSnack),a(o.dinner)}}),Object.entries(s).map(function(e){var n=(0,r.Z)(e,2),s=n[0],a=n[1];return{name:s,grams:Math.round(a),kg:(a/1e3).toFixed(2)}}).sort(function(e,n){return n.grams-e.grams})},[ne,w,He]),cn=function(){var e=(0,c.Z)((0,t.Z)().m(function e(){var n,s,a;return(0,t.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:return te(!0),se(null),e.p=1,e.n=2,k(B,V,he,ge);case 2:n=e.v,se(n),de(0),u().setStorageSync("kt_ai_generated_recipe",n),u().showToast({title:"\u751f\u6210\u6210\u529f",icon:"success"}),e.n=4;break;case 3:e.p=3,a=e.v,console.error("[Kitchen] AI\u751f\u6210\u5931\u8d25\uff0c\u4f7f\u7528\u56de\u9000\u98df\u8c31:",a),s=y(B,V,he,ge),se(s),de(0),u().setStorageSync("kt_ai_generated_recipe",s),u().showToast({title:"\u5df2\u751f\u6210\u53c2\u8003\u98df\u8c31",icon:"success"});case 4:return e.p=4,te(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(){return e.apply(this,arguments)}}(),mn=function(){var e=(0,c.Z)((0,t.Z)().m(function e(n){var s,a;return(0,t.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:return e.p=0,e.n=1,(0,x.Qu)(x.I.MEAL_PLANS,n,!0);case 1:return s=e.v,e.a(2,s.success);case 2:return e.p=2,a=e.v,console.error("[Kitchen] \u4e0a\u4f20\u5f02\u5e38:",a.message),e.a(2,!1)}},e,null,[[0,2]])}));return function(n){return e.apply(this,arguments)}}(),dn=function(){var e=(0,c.Z)((0,t.Z)().m(function e(){return(0,t.Z)().w(function(e){while(1)switch(e.n){case 0:if(ne){e.n=1;break}return e.a(2);case 1:u().showModal({title:"\u5e94\u7528\u98df\u8c31",content:"\u786e\u5b9a\u8981\u5c06AI\u751f\u6210\u7684\u98df\u8c31\u8bbe\u4e3a\u5f53\u524d\u98df\u8c31\u5e76\u4e0a\u4f20\u4e91\u7aef\u5417\uff1f",success:function(){var e=(0,c.Z)((0,t.Z)().m(function e(n){var s,a,r,c;return(0,t.Z)().w(function(e){while(1)switch(e.n){case 0:if(!n.confirm){e.n=2;break}return u().showLoading({title:"\u6b63\u5728\u4fdd\u5b58..."}),s=(0,l.Z)((0,l.Z)({},ne),{},{status:"CONFIRMED"}),a=[s].concat((0,i.Z)(G)),P(a),u().setStorageSync(x.I.MEAL_PLANS,a),e.n=1,mn(a);case 1:r=e.v,u().removeStorageSync("kt_ai_generated_recipe"),D(s),se(null),T("current"),_(0),u().hideLoading(),u().showToast({title:r?"\u5df2\u4fdd\u5b58\u5e76\u4e0a\u4f20\u4e91\u7aef":"\u5df2\u4fdd\u5b58\u672c\u5730",icon:r?"success":"none"}),r&&(c=(0,N.ts)(),(0,v.GW)({weekRange:s.weekRange||"\u672c\u5468",updatedBy:(null===c||void 0===c?void 0:c.name)||"\u7ba1\u7406\u5458"}));case 2:return e.a(2)}},e)}));function n(n){return e.apply(this,arguments)}return n}()});case 2:return e.a(2)}},e)}));return function(){return e.apply(this,arguments)}}();(0,m.useEffect)(function(){sn(),un(),rn(),on(),_(an()),de(an())},[]),(0,o.useDidShow)(function(){un(),rn(),on()});var on=function(){var e=u().getStorageSync("kt_ai_generated_recipe");e&&(se(e),e.startDate&&xe(e.startDate),e.endDate&&pe(e.endDate))},un=function(){var e=(0,c.Z)((0,t.Z)().m(function e(){var n,s,a,i,r,l,c,m;return(0,t.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:return R(!0),n=u().getStorageSync(x.I.MEAL_PLANS)||u().getStorageSync(x.I.KITCHEN_HISTORY)||[],n.length>0&&(P(n),s=n.filter(function(e){return"CONFIRMED"===e.status}),s.length>0&&D(s[0])),e.p=1,e.n=2,(0,x.jn)(x.I.MEAL_PLANS);case 2:a=e.v,console.log("[Kitchen] \u4e91\u7aef\u540c\u6b65\u7ed3\u679c:",a),a.success&&a.data&&a.data.length>0?(i=a.data,r=i[0],l=n[0],console.log("[Kitchen] \u4e91\u7aef\u6700\u65b0:",null===r||void 0===r?void 0:r.confirmedAt,"\u672c\u5730\u6700\u65b0:",null===l||void 0===l?void 0:l.confirmedAt),!l||r&&r.confirmedAt&&(!l.confirmedAt||new Date(r.confirmedAt)>new Date(l.confirmedAt))?(u().setStorageSync(x.I.MEAL_PLANS,i),P(i),c=i.filter(function(e){return"CONFIRMED"===e.status}),c.length>0&&D(c[0]),console.log("[Kitchen] \u2705 \u5df2\u4ece\u4e91\u7aef\u540c\u6b65\u6700\u65b0\u98df\u8c31\uff0c\u5171",i.length,"\u6761")):console.log("[Kitchen] \u672c\u5730\u6570\u636e\u8f83\u65b0\u6216\u76f8\u540c\uff0c\u4fdd\u6301\u672c\u5730\u6570\u636e")):console.log("[Kitchen] \u4e91\u7aef\u65e0\u6570\u636e\u6216\u4e0b\u8f7d\u5931\u8d25:",a.error),e.n=4;break;case 3:e.p=3,m=e.v,console.log("[Kitchen] \u4e91\u7aef\u540c\u6b65\u5f02\u5e38:",m);case 4:R(!1);case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),hn=function(e,n,s){if(s){var a,i,r;if("lunch"===n)return null===(a=e.lunch)||void 0===a?void 0:a[s];if("breakfast"===n)return null===(i=e.breakfast)||void 0===i?void 0:i[s];if("afternoonSnack"===n)return null===(r=e.afternoonSnack)||void 0===r?void 0:r[s]}return e[n]},xn=function(e,n,s){if(ne){var a=ne.days[e];if(a){var i=hn(a.meals,n,s);i&&(be({dayIdx:e,mealKey:n,subKey:s,type:"dish"}),Ze(i.dishName||""),ke(!0))}}else u().showToast({title:"\u8bf7\u5148\u751f\u6210AI\u98df\u8c31",icon:"none"})},vn=function(e,n,s,a){if(ne){var i=ne.days[e];if(i){var r=hn(i.meals,n,s);if(r&&r.ingredients[a]){var t=r.ingredients[a];be({dayIdx:e,mealKey:n,subKey:s,ingredientIdx:a,type:"ingredient"}),Oe(t.name),Me(t.perPersonGrams.toString()),ke(!0)}}}},Nn=function(e,n,s){ne&&(be({dayIdx:e,mealKey:n,subKey:s,type:"addIngredient"}),Oe(""),Me(""),ke(!0))},gn=function(e,n,s,a){ne&&u().showModal({title:"\u5220\u9664\u98df\u6750",content:"\u786e\u5b9a\u8981\u5220\u9664\u8fd9\u4e2a\u98df\u6750\u5417\uff1f",success:function(i){if(i.confirm){var r=JSON.parse(JSON.stringify(ne)),t=hn(r.days[e].meals,n,s);t&&t.ingredients&&(t.ingredients.splice(a,1),se(r),u().setStorageSync("kt_ai_generated_recipe",r),u().showToast({title:"\u5df2\u5220\u9664",icon:"success"}))}}})},pn=function(){if(ne&&Se){var e=JSON.parse(JSON.stringify(ne)),n=Se.dayIdx,s=Se.mealKey,a=Se.subKey,i=Se.ingredientIdx,r=Se.type,t=hn(e.days[n].meals,s,a);if(t){if("dish"===r)t.dishName=Ie;else if("ingredient"===r&&void 0!==i){if(!Ae.trim()||!Fe)return void u().showToast({title:"\u8bf7\u586b\u5199\u5b8c\u6574",icon:"none"});t.ingredients[i]={name:Ae.trim(),perPersonGrams:parseFloat(Fe)||0}}else if("addIngredient"===r){if(!Ae.trim()||!Fe)return void u().showToast({title:"\u8bf7\u586b\u5199\u5b8c\u6574",icon:"none"});t.ingredients||(t.ingredients=[]),t.ingredients.push({name:Ae.trim(),perPersonGrams:parseFloat(Fe)||0})}se(e),u().setStorageSync("kt_ai_generated_recipe",e),ke(!1),be(null),u().showToast({title:"\u5df2\u4fdd\u5b58",icon:"success"})}}},jn=function(){if(ne){var e=(0,l.Z)((0,l.Z)({},ne),{},{weekRange:"".concat(he," ~ ").concat(ge),startDate:he,endDate:ge});se(e),u().setStorageSync("kt_ai_generated_recipe",e),u().showToast({title:"\u65e5\u671f\u5df2\u66f4\u65b0",icon:"success"})}},fn=function(){var e=(0,c.Z)((0,t.Z)().m(function e(){var n,s,a,i,r,l,c;return(0,t.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:return J(!0),e.p=1,e.n=2,(0,x.jn)(x.I.MEAL_PLANS);case 2:if(r=e.v,r){e.n=3;break}r=[];case 3:if(n=r,0!==n.length){e.n=5;break}return e.n=4,(0,x.jn)(x.I.KITCHEN_HISTORY);case 4:l=e.v,e.n=6;break;case 5:l=[];case 6:s=l,a=n.length>0?n:s,a&&a.length>0?(u().setStorageSync(x.I.MEAL_PLANS,a),P(a),i=a.filter(function(e){return"CONFIRMED"===e.status}),i.length>0&&D(i[0]),u().showToast({title:"\u5df2\u540c\u6b65 ".concat(a.length," \u4efd\u98df\u8c31"),icon:"success"})):u().showToast({title:"\u4e91\u7aef\u6682\u65e0\u98df\u8c31\u6570\u636e",icon:"none"}),e.n=8;break;case 7:e.p=7,c=e.v,console.error("[Kitchen] \u540c\u6b65\u5931\u8d25:",c),u().showToast({title:"\u540c\u6b65\u5931\u8d25",icon:"none"});case 8:return e.p=8,J(!1),e.f(8);case 9:return e.a(2)}},e,null,[[1,7,8,9]])}));return function(){return e.apply(this,arguments)}}(),Gn=function(e,n,s,a){return n&&n.dishName&&"\u5f85\u5b9a"!==n.dishName?(0,p.jsxs)(d.G7,{className:"meal-card ".concat(a),children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:s}),(0,p.jsx)(d.xv,{className:"label",children:e})]}),(0,p.jsxs)(d.G7,{className:"dish-content",children:[(0,p.jsx)(d.xv,{className:"dish-name",children:n.dishName}),n.ingredients&&n.ingredients.length>0&&(0,p.jsx)(d.G7,{className:"ingredients",children:n.ingredients.map(function(e,n){return(0,p.jsxs)(d.G7,{className:"ingredient-tag",children:[(0,p.jsx)(d.xv,{className:"ing-name",children:e.name}),(0,p.jsxs)(d.xv,{className:"ing-grams",children:[e.perPersonGrams,"g/\u4eba"]})]},n)})})]})]}):null},kn=function(e){var n,s,a,i;if(!e)return null;var r=e.mainDish,t=e.sideDish,l=e.soup,c=e.staple,m=[r,t,l,c].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});return m?(0,p.jsxs)(d.G7,{className:"meal-card lunch-card",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf71"}),(0,p.jsx)(d.xv,{className:"label",children:"\u5348\u9910"})]}),(0,p.jsxs)(d.G7,{className:"lunch-grid",children:[(null===r||void 0===r?void 0:r.dishName)&&"\u5f85\u5b9a"!==r.dishName&&(0,p.jsxs)(d.G7,{className:"lunch-item main",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u4e3b\u83dc"}),(0,p.jsx)(d.xv,{className:"item-name",children:r.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(n=r.ingredients)||void 0===n?void 0:n.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===t||void 0===t?void 0:t.dishName)&&"\u5f85\u5b9a"!==t.dishName&&(0,p.jsxs)(d.G7,{className:"lunch-item side",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u526f\u83dc"}),(0,p.jsx)(d.xv,{className:"item-name",children:t.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(s=t.ingredients)||void 0===s?void 0:s.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===l||void 0===l?void 0:l.dishName)&&"\u5f85\u5b9a"!==l.dishName&&(0,p.jsxs)(d.G7,{className:"lunch-item soup",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u6c64\u54c1"}),(0,p.jsx)(d.xv,{className:"item-name",children:l.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(a=l.ingredients)||void 0===a?void 0:a.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===c||void 0===c?void 0:c.dishName)&&"\u5f85\u5b9a"!==c.dishName&&(0,p.jsxs)(d.G7,{className:"lunch-item staple",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u4e3b\u98df"}),(0,p.jsx)(d.xv,{className:"item-name",children:c.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(i=c.ingredients)||void 0===i?void 0:i.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]})]})]}):null},Pn=function(e){var n,s,a;if(!e)return null;var i=e.staple,r=e.sideDish,t=e.porridge,l=[i,r,t].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});return l?(0,p.jsxs)(d.G7,{className:"meal-card breakfast-card",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf05"}),(0,p.jsx)(d.xv,{className:"label",children:"\u65e9\u9910"})]}),(0,p.jsxs)(d.G7,{className:"breakfast-grid",children:[(null===i||void 0===i?void 0:i.dishName)&&"\u5f85\u5b9a"!==i.dishName&&(0,p.jsxs)(d.G7,{className:"breakfast-item staple",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u4e3b\u98df"}),(0,p.jsx)(d.xv,{className:"item-name",children:i.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(n=i.ingredients)||void 0===n?void 0:n.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===r||void 0===r?void 0:r.dishName)&&"\u5f85\u5b9a"!==r.dishName&&(0,p.jsxs)(d.G7,{className:"breakfast-item side",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u914d\u83dc"}),(0,p.jsx)(d.xv,{className:"item-name",children:r.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(s=r.ingredients)||void 0===s?void 0:s.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===t||void 0===t?void 0:t.dishName)&&"\u5f85\u5b9a"!==t.dishName&&(0,p.jsxs)(d.G7,{className:"breakfast-item porridge",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u7ca5/\u6c64"}),(0,p.jsx)(d.xv,{className:"item-name",children:t.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(a=t.ingredients)||void 0===a?void 0:a.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]})]})]}):null},yn=function(e){var n,s;if(!e)return null;var a=e.pastry,i=e.fruit,r=[a,i].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});return r?(0,p.jsxs)(d.G7,{className:"meal-card snack-card",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf6a"}),(0,p.jsx)(d.xv,{className:"label",children:"\u4e0b\u5348\u70b9\u5fc3"})]}),(0,p.jsxs)(d.G7,{className:"snack-grid",children:[(null===a||void 0===a?void 0:a.dishName)&&"\u5f85\u5b9a"!==a.dishName&&(0,p.jsxs)(d.G7,{className:"snack-item pastry",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u7cd5\u70b9"}),(0,p.jsx)(d.xv,{className:"item-name",children:a.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(n=a.ingredients)||void 0===n?void 0:n.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]}),(null===i||void 0===i?void 0:i.dishName)&&"\u5f85\u5b9a"!==i.dishName&&(0,p.jsxs)(d.G7,{className:"snack-item fruit",children:[(0,p.jsx)(d.xv,{className:"item-label",children:"\u6c34\u679c"}),(0,p.jsx)(d.xv,{className:"item-name",children:i.dishName}),(0,p.jsx)(d.G7,{className:"item-ingredients",children:null===(s=i.ingredients)||void 0===s?void 0:s.map(function(e,n){return(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]},n)})})]})]})]}):null},Sn=function(e){if(!e||!e.meals)return(0,p.jsxs)(d.G7,{className:"no-data",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83d\udced"}),(0,p.jsx)(d.xv,{children:"\u6682\u65e0\u6b64\u65e5\u98df\u8c31"})]});var n=e.meals;return(0,p.jsxs)(d.G7,{className:"day-menu",children:[Pn(n.breakfast),Gn("\u6c34\u679c\u52a0\u9910",n.morningFruitSnack,"\ud83c\udf4e","fruit"),Gn("\u4e0a\u5348\u70b9\u5fc3",n.morningSnack,"\ud83e\udd50","morning-snack"),kn(n.lunch),Gn("\u725b\u5976\u52a0\u9910",n.milkSnack,"\ud83e\udd5b","milk"),yn(n.afternoonSnack),Gn("\u665a\u9910",n.dinner,"\ud83c\udf72","dinner")]})},bn=function(e,n,s,a,i,r,t){return n&&n.dishName&&"\u5f85\u5b9a"!==n.dishName?(0,p.jsxs)(d.G7,{className:"meal-card ".concat(a," editable"),children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:s}),(0,p.jsx)(d.xv,{className:"label",children:e}),(0,p.jsx)(d.G7,{className:"edit-icon",onClick:function(e){e.stopPropagation(),xn(r,i,t)},children:(0,p.jsx)(d.xv,{children:"\u270f\ufe0f"})})]}),(0,p.jsxs)(d.G7,{className:"dish-content",children:[(0,p.jsx)(d.xv,{className:"dish-name",children:n.dishName}),n.ingredients&&n.ingredients.length>0&&(0,p.jsx)(d.G7,{className:"ingredients editable-ingredients",children:n.ingredients.map(function(e,n){return(0,p.jsxs)(d.G7,{className:"ingredient-tag editable",children:[(0,p.jsxs)(d.G7,{className:"ing-main",onClick:function(e){e.stopPropagation(),vn(r,i,t,n)},children:[(0,p.jsx)(d.xv,{className:"ing-name",children:e.name}),(0,p.jsxs)(d.xv,{className:"ing-grams",children:[e.perPersonGrams,"g/\u4eba"]})]}),(0,p.jsx)(d.G7,{className:"ing-delete",onClick:function(e){e.stopPropagation(),gn(r,i,t,n)},children:(0,p.jsx)(d.xv,{children:"\u2715"})})]},n)})}),(0,p.jsx)(d.G7,{className:"add-ingredient-btn",onClick:function(e){e.stopPropagation(),Nn(r,i,t)},children:(0,p.jsx)(d.xv,{children:"+ \u6dfb\u52a0\u98df\u6750"})})]})]}):null},wn=function(e,n){if(!e)return null;var s=e.mainDish,a=e.sideDish,i=e.soup,r=e.staple,t=[s,a,i,r].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});if(!t)return null;var l=function(e,s,a,i){var r;return null!==e&&void 0!==e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName?(0,p.jsxs)(d.G7,{className:"lunch-item ".concat(i),children:[(0,p.jsxs)(d.G7,{className:"item-header",children:[(0,p.jsx)(d.xv,{className:"item-label",children:s}),(0,p.jsx)(d.G7,{className:"edit-icon-small",onClick:function(e){e.stopPropagation(),xn(n,"lunch",a)},children:(0,p.jsx)(d.xv,{children:"\u270f\ufe0f"})})]}),(0,p.jsx)(d.xv,{className:"item-name",children:e.dishName}),(0,p.jsxs)(d.G7,{className:"item-ingredients editable",children:[null===(r=e.ingredients)||void 0===r?void 0:r.map(function(e,s){return(0,p.jsxs)(d.G7,{className:"ing-row",children:[(0,p.jsx)(d.G7,{className:"ing-info",onClick:function(e){e.stopPropagation(),vn(n,"lunch",a,s)},children:(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]})}),(0,p.jsx)(d.G7,{className:"ing-delete-small",onClick:function(e){e.stopPropagation(),gn(n,"lunch",a,s)},children:(0,p.jsx)(d.xv,{children:"\u2715"})})]},s)}),(0,p.jsx)(d.G7,{className:"add-ing-small",onClick:function(e){e.stopPropagation(),Nn(n,"lunch",a)},children:(0,p.jsx)(d.xv,{children:"+ \u6dfb\u52a0"})})]})]}):null};return(0,p.jsxs)(d.G7,{className:"meal-card lunch-card editable",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf71"}),(0,p.jsx)(d.xv,{className:"label",children:"\u5348\u9910"})]}),(0,p.jsxs)(d.G7,{className:"lunch-grid",children:[l(s,"\u4e3b\u83dc","mainDish","main"),l(a,"\u526f\u83dc","sideDish","side"),l(i,"\u6c64\u54c1","soup","soup"),l(r,"\u4e3b\u98df","staple","staple")]})]})},Dn=function(e,n){if(!e)return null;var s=e.staple,a=e.sideDish,i=e.porridge,r=[s,a,i].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});if(!r)return null;var t=function(e,s,a,i){var r;return null!==e&&void 0!==e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName?(0,p.jsxs)(d.G7,{className:"breakfast-item ".concat(i),children:[(0,p.jsxs)(d.G7,{className:"item-header",children:[(0,p.jsx)(d.xv,{className:"item-label",children:s}),(0,p.jsx)(d.G7,{className:"edit-icon-small",onClick:function(e){e.stopPropagation(),xn(n,"breakfast",a)},children:(0,p.jsx)(d.xv,{children:"\u270f\ufe0f"})})]}),(0,p.jsx)(d.xv,{className:"item-name",children:e.dishName}),(0,p.jsxs)(d.G7,{className:"item-ingredients editable",children:[null===(r=e.ingredients)||void 0===r?void 0:r.map(function(e,s){return(0,p.jsxs)(d.G7,{className:"ing-row",children:[(0,p.jsx)(d.G7,{className:"ing-info",onClick:function(e){e.stopPropagation(),vn(n,"breakfast",a,s)},children:(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]})}),(0,p.jsx)(d.G7,{className:"ing-delete-small",onClick:function(e){e.stopPropagation(),gn(n,"breakfast",a,s)},children:(0,p.jsx)(d.xv,{children:"\u2715"})})]},s)}),(0,p.jsx)(d.G7,{className:"add-ing-small",onClick:function(e){e.stopPropagation(),Nn(n,"breakfast",a)},children:(0,p.jsx)(d.xv,{children:"+ \u6dfb\u52a0"})})]})]}):null};return(0,p.jsxs)(d.G7,{className:"meal-card breakfast-card editable",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf05"}),(0,p.jsx)(d.xv,{className:"label",children:"\u65e9\u9910"})]}),(0,p.jsxs)(d.G7,{className:"breakfast-grid",children:[t(s,"\u4e3b\u98df","staple","staple"),t(a,"\u914d\u83dc","sideDish","side"),t(i,"\u7ca5/\u6c64","porridge","porridge")]})]})},In=function(e,n){if(!e)return null;var s=e.pastry,a=e.fruit,i=[s,a].some(function(e){return e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName});if(!i)return null;var r=function(e,s,a,i){var r;return null!==e&&void 0!==e&&e.dishName&&"\u5f85\u5b9a"!==e.dishName?(0,p.jsxs)(d.G7,{className:"snack-item ".concat(i),children:[(0,p.jsxs)(d.G7,{className:"item-header",children:[(0,p.jsx)(d.xv,{className:"item-label",children:s}),(0,p.jsx)(d.G7,{className:"edit-icon-small",onClick:function(e){e.stopPropagation(),xn(n,"afternoonSnack",a)},children:(0,p.jsx)(d.xv,{children:"\u270f\ufe0f"})})]}),(0,p.jsx)(d.xv,{className:"item-name",children:e.dishName}),(0,p.jsxs)(d.G7,{className:"item-ingredients editable",children:[null===(r=e.ingredients)||void 0===r?void 0:r.map(function(e,s){return(0,p.jsxs)(d.G7,{className:"ing-row",children:[(0,p.jsx)(d.G7,{className:"ing-info",onClick:function(e){e.stopPropagation(),vn(n,"afternoonSnack",a,s)},children:(0,p.jsxs)(d.xv,{className:"ing",children:[e.name," ",e.perPersonGrams,"g/\u4eba"]})}),(0,p.jsx)(d.G7,{className:"ing-delete-small",onClick:function(e){e.stopPropagation(),gn(n,"afternoonSnack",a,s)},children:(0,p.jsx)(d.xv,{children:"\u2715"})})]},s)}),(0,p.jsx)(d.G7,{className:"add-ing-small",onClick:function(e){e.stopPropagation(),Nn(n,"afternoonSnack",a)},children:(0,p.jsx)(d.xv,{children:"+ \u6dfb\u52a0"})})]})]}):null};return(0,p.jsxs)(d.G7,{className:"meal-card snack-card editable",children:[(0,p.jsxs)(d.G7,{className:"meal-header",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83c\udf6a"}),(0,p.jsx)(d.xv,{className:"label",children:"\u4e0b\u5348\u70b9\u5fc3"})]}),(0,p.jsxs)(d.G7,{className:"snack-grid",children:[r(s,"\u7cd5\u70b9","pastry","pastry"),r(a,"\u6c34\u679c","fruit","fruit")]})]})},Zn=function(e,n){if(!e||!e.meals)return(0,p.jsxs)(d.G7,{className:"no-data",children:[(0,p.jsx)(d.xv,{className:"icon",children:"\ud83d\udced"}),(0,p.jsx)(d.xv,{children:"\u6682\u65e0\u6b64\u65e5\u98df\u8c31"})]});var s=e.meals;return(0,p.jsxs)(d.G7,{className:"day-menu",children:[Dn(s.breakfast,n),bn("\u6c34\u679c\u52a0\u9910",s.morningFruitSnack,"\ud83c\udf4e","fruit","morningFruitSnack",n),bn("\u4e0a\u5348\u70b9\u5fc3",s.morningSnack,"\ud83e\udd50","morning-snack","morningSnack",n),wn(s.lunch,n),bn("\u725b\u5976\u52a0\u9910",s.milkSnack,"\ud83e\udd5b","milk","milkSnack",n),In(s.afternoonSnack,n),bn("\u665a\u9910",s.dinner,"\ud83c\udf72","dinner","dinner",n)]})},Cn=function(e){D(e),T("current"),_(0)};return K?(0,p.jsxs)(d.G7,{className:"loading-page",children:[(0,p.jsx)(d.xv,{className:"loading-icon",children:"\ud83c\udf73"}),(0,p.jsx)(d.xv,{className:"loading-text",children:"\u52a0\u8f7d\u4e2d..."})]}):(0,p.jsxs)(d.G7,{className:"kitchen-page",children:[(0,p.jsx)(g.Z,{title:"\u672c\u5468\u98df\u8c31"}),(0,p.jsx)(g.p,{}),(0,p.jsxs)(d.G7,{className:"header",children:[(0,p.jsxs)(d.G7,{className:"header-main",children:[(0,p.jsx)(d.xv,{className:"title",children:"\ud83c\udf73 \u98df\u8c31\u7ba1\u7406"}),(0,p.jsx)(d.G7,{className:"sync-btn ".concat(U?"syncing":""),onClick:U?void 0:fn,children:(0,p.jsx)(d.xv,{children:U?"\u540c\u6b65\u4e2d...":"\ud83d\udd04 \u540c\u6b65"})})]}),w&&(0,p.jsxs)(d.G7,{className:"header-info",children:[(0,p.jsx)(d.xv,{className:"campus",children:(null===(e=f[w.grade])||void 0===e?void 0:e.name)||w.grade}),(0,p.jsx)(d.xv,{className:"week-range",children:w.weekRange}),(0,p.jsxs)(d.xv,{className:"headcount",children:[w.headcount,"\u4eba\u7528\u9910"]})]})]}),(0,p.jsxs)(d.G7,{className:"view-tabs",children:[(0,p.jsx)(d.G7,{className:"view-tab ".concat("current"===E?"active":""),onClick:function(){return T("current")},children:(0,p.jsx)(d.xv,{children:"\ud83d\udccb \u672c\u5468\u98df\u8c31"})}),(0,p.jsx)(d.G7,{className:"view-tab ".concat("history"===E?"active":""),onClick:function(){return T("history")},children:(0,p.jsxs)(d.xv,{children:["\ud83d\udcda \u5386\u53f2 (",G.filter(function(e){return"CONFIRMED"===e.status}).length,")"]})}),(0,p.jsx)(d.G7,{className:"view-tab ".concat("ai"===E?"active":""),onClick:function(){return T("ai")},children:(0,p.jsx)(d.xv,{children:"\ud83e\udd16 AI\u63a8\u8350"})})]}),"ai"===E?(0,p.jsxs)(d.pf,{className:"ai-recipe-panel",scrollY:!0,children:[(0,p.jsxs)(d.G7,{className:"ai-header",children:[(0,p.jsx)(d.xv,{className:"ai-title",children:"\ud83e\udd16 AI\u667a\u80fd\u98df\u8c31\u751f\u6210"}),(0,p.jsx)(d.xv,{className:"ai-desc",children:"\u6839\u636e\u300a3-6\u5c81\u513f\u7ae5\u5b66\u4e60\u4e0e\u53d1\u5c55\u6307\u5357\u300b\u8425\u517b\u6807\u51c6"})]}),(0,p.jsxs)(d.G7,{className:"date-range-section",children:[(0,p.jsx)(d.xv,{className:"section-title",children:"\ud83d\udcc5 \u98df\u8c31\u65e5\u671f\u8303\u56f4"}),(0,p.jsxs)(d.G7,{className:"date-inputs",children:[(0,p.jsxs)(d.G7,{className:"date-item",children:[(0,p.jsx)(d.xv,{className:"date-label",children:"\u5f00\u59cb\u65e5\u671f"}),(0,p.jsx)(d.cW,{mode:"date",value:he,onChange:function(e){return xe(e.detail.value)},children:(0,p.jsx)(d.G7,{className:"date-picker",children:(0,p.jsx)(d.xv,{children:he||"\u9009\u62e9\u65e5\u671f"})})})]}),(0,p.jsx)(d.xv,{className:"date-separator",children:"\u81f3"}),(0,p.jsxs)(d.G7,{className:"date-item",children:[(0,p.jsx)(d.xv,{className:"date-label",children:"\u7ed3\u675f\u65e5\u671f"}),(0,p.jsx)(d.cW,{mode:"date",value:ge,onChange:function(e){return pe(e.detail.value)},children:(0,p.jsx)(d.G7,{className:"date-picker",children:(0,p.jsx)(d.xv,{children:ge||"\u9009\u62e9\u65e5\u671f"})})})]})]}),ne&&(0,p.jsx)(d.G7,{className:"update-date-btn",onClick:jn,children:(0,p.jsx)(d.xv,{children:"\ud83d\udcc6 \u66f4\u65b0\u65e5\u671f\u5230\u98df\u8c31"})})]}),He>0&&(0,p.jsxs)(d.G7,{className:"attendance-info",children:[(0,p.jsx)(d.xv,{className:"attendance-icon",children:"\ud83d\udcca"}),(0,p.jsxs)(d.xv,{className:"attendance-text",children:["\u4eca\u65e5\u51fa\u52e4\uff1a",He,"\u4eba"]}),(0,p.jsx)(d.G7,{className:"use-attendance-btn",onClick:function(){return X(He)},children:(0,p.jsx)(d.xv,{children:"\u4f7f\u7528\u6b64\u4eba\u6570"})})]}),(0,p.jsxs)(d.G7,{className:"ai-input-section",children:[(0,p.jsx)(d.xv,{className:"input-label",children:"\u9009\u62e9\u56ed\u533a\uff1a"}),(0,p.jsx)(d.G7,{className:"grade-options",children:["SHIQI_YOU","JIU_YOU","HIGH_END","PHUI"].map(function(e){return(0,p.jsx)(d.G7,{className:"grade-option ".concat(B===e?"active":""),onClick:function(){return W(e)},children:(0,p.jsx)(d.xv,{children:f[e].name})},e)})})]}),(0,p.jsxs)(d.G7,{className:"ai-input-section",children:[(0,p.jsx)(d.xv,{className:"input-label",children:"\u7528\u9910\u4eba\u6570\uff1a"}),(0,p.jsxs)(d.G7,{className:"headcount-input",children:[(0,p.jsx)(d.G7,{className:"headcount-btn",onClick:function(){return X(Math.max(10,V-10))},children:(0,p.jsx)(d.xv,{children:"-"})}),(0,p.jsx)(d.II,{className:"headcount-value-input",type:"number",value:V.toString(),onInput:function(e){return X(parseInt(e.detail.value)||10)}}),(0,p.jsx)(d.xv,{className:"headcount-unit",children:"\u4eba"}),(0,p.jsx)(d.G7,{className:"headcount-btn",onClick:function(){return X(V+10)},children:(0,p.jsx)(d.xv,{children:"+"})})]})]}),(0,p.jsxs)(d.G7,{className:"nutrition-guide-toggle",onClick:function(){return en(!$e)},children:[(0,p.jsx)(d.xv,{className:"toggle-icon",children:"\ud83d\udcda"}),(0,p.jsx)(d.xv,{className:"toggle-text",children:"\u300a3-6\u5c81\u513f\u7ae5\u5b66\u4e60\u4e0e\u53d1\u5c55\u6307\u5357\u300b\u8425\u517b\u6807\u51c6"}),(0,p.jsx)(d.xv,{className:"toggle-arrow",children:$e?"\u25b2":"\u25bc"})]}),$e&&(0,p.jsxs)(d.G7,{className:"nutrition-guide-card",children:[(0,p.jsx)(d.xv,{className:"guide-title",children:"\ud83d\udcd6 \u5b66\u9f84\u524d\u513f\u7ae5\u6bcf\u65e5\u8425\u517b\u9700\u6c42"}),(0,p.jsx)(d.G7,{className:"guide-grid",children:Object.entries(j).map(function(e){var n=(0,r.Z)(e,2),s=n[0],a=n[1];return(0,p.jsxs)(d.G7,{className:"guide-item",children:[(0,p.jsx)(d.xv,{className:"guide-label",children:a.label}),(0,p.jsxs)(d.xv,{className:"guide-value",children:[a.min,"-",a.max,a.unit]})]},s)})})]}),(0,p.jsx)(d.G7,{className:"generate-btn ".concat(re?"loading":""),onClick:re?void 0:cn,children:(0,p.jsx)(d.xv,{children:re?"\u23f3 AI\u751f\u6210\u4e2d...":"\u2728 \u751f\u6210\u672c\u5468\u98df\u8c31"})}),ne&&(0,p.jsxs)(d.G7,{className:"ai-preview",children:[(0,p.jsxs)(d.G7,{className:"preview-header",children:[(0,p.jsx)(d.xv,{className:"preview-title",children:"\ud83d\udccb \u751f\u6210\u7ed3\u679c\u9884\u89c8\uff08\u53ef\u7f16\u8f91\uff09"}),(0,p.jsx)(d.G7,{className:"apply-btn",onClick:dn,children:(0,p.jsx)(d.xv,{children:"\u2705 \u5e94\u7528\u98df\u8c31"})})]}),(0,p.jsxs)(d.G7,{className:"preview-info",children:[(0,p.jsxs)(d.xv,{className:"info-item",children:["\ud83c\udfeb ",null===(n=f[ne.grade])||void 0===n?void 0:n.name]}),(0,p.jsxs)(d.xv,{className:"info-item",children:["\ud83d\udc65 ",V,"\u4eba"]}),(0,p.jsxs)(d.xv,{className:"info-item",children:["\ud83d\udcc5 ",ne.weekRange]})]}),(0,p.jsx)(d.G7,{className:"day-tabs compact",children:nn.map(function(e,n){return(0,p.jsx)(d.G7,{className:"day-tab ".concat(me===n?"active":""),onClick:function(){return de(n)},children:(0,p.jsx)(d.xv,{className:"day-name",children:e})},e)})}),ne.days[me]&&(0,p.jsx)(d.G7,{className:"editable-day-menu",children:Zn(ne.days[me],me)}),(0,p.jsxs)(d.G7,{className:"total-section",children:[(0,p.jsxs)(d.G7,{className:"total-toggle",onClick:function(){return qe(!ze)},children:[(0,p.jsx)(d.xv,{className:"toggle-icon",children:"\ud83e\udd6c"}),(0,p.jsxs)(d.xv,{className:"toggle-text",children:[nn[me],"\u98df\u6750\u603b\u91cf\uff08",V,"\u4eba\u4efd\uff09"]}),(0,p.jsx)(d.xv,{className:"toggle-arrow",children:ze?"\u25b2":"\u25bc"})]}),ze&&(0,p.jsxs)(d.G7,{className:"total-ingredients-card",children:[(0,p.jsxs)(d.G7,{className:"ingredients-header",children:[(0,p.jsxs)(d.xv,{className:"header-title",children:["\ud83c\udf73 ",nn[me],"\u5907\u6599\u6e05\u5355"]}),(0,p.jsxs)(d.xv,{className:"header-subtitle",children:[V,"\u4eba\u4efd"]})]}),(0,p.jsx)(d.G7,{className:"ingredients-grid",children:tn.map(function(e,n){return(0,p.jsxs)(d.G7,{className:"ingredient-item",children:[(0,p.jsx)(d.xv,{className:"ing-name",children:e.name}),(0,p.jsxs)(d.G7,{className:"ing-amounts",children:[(0,p.jsxs)(d.xv,{className:"ing-grams",children:[e.grams,"g"]}),e.grams>=1e3&&(0,p.jsxs)(d.xv,{className:"ing-kg",children:["(",e.kg,"kg)"]})]})]},n)})})]})]}),(0,p.jsxs)(d.G7,{className:"total-section weekly",children:[(0,p.jsxs)(d.G7,{className:"total-toggle",onClick:function(){return Qe(!Ye)},children:[(0,p.jsx)(d.xv,{className:"toggle-icon",children:"\ud83d\udce6"}),(0,p.jsxs)(d.xv,{className:"toggle-text",children:["\u4e00\u5468\u98df\u6750\u603b\u91cf\uff08",V,"\u4eba \xd7 5\u5929\uff09"]}),(0,p.jsx)(d.xv,{className:"toggle-arrow",children:Ye?"\u25b2":"\u25bc"})]}),Ye&&(0,p.jsxs)(d.G7,{className:"total-ingredients-card weekly",children:[(0,p.jsxs)(d.G7,{className:"ingredients-header",children:[(0,p.jsx)(d.xv,{className:"header-title",children:"\ud83d\udce6 \u4e00\u5468\u91c7\u8d2d\u6e05\u5355"}),(0,p.jsxs)(d.xv,{className:"header-subtitle",children:[V,"\u4eba \xd7 5\u5929"]})]}),(0,p.jsx)(d.G7,{className:"ingredients-grid",children:ln.map(function(e,n){return(0,p.jsxs)(d.G7,{className:"ingredient-item",children:[(0,p.jsx)(d.xv,{className:"ing-name",children:e.name}),(0,p.jsxs)(d.G7,{className:"ing-amounts",children:[(0,p.jsxs)(d.xv,{className:"ing-grams",children:[e.grams,"g"]}),e.grams>=1e3&&(0,p.jsxs)(d.xv,{className:"ing-kg",children:["(",e.kg,"kg)"]})]})]},n)})}),(0,p.jsxs)(d.G7,{className:"weekly-summary",children:[(0,p.jsxs)(d.xv,{className:"summary-text",children:["\u5171 ",ln.length," \u79cd\u98df\u6750"]}),(0,p.jsxs)(d.xv,{className:"summary-text",children:["\u603b\u91cd\u7ea6 ",(ln.reduce(function(e,n){return e+n.grams},0)/1e3).toFixed(1)," kg"]})]})]})]})]}),(0,p.jsxs)(d.G7,{className:"ai-tips",children:[(0,p.jsx)(d.xv,{className:"tips-title",children:"\ud83d\udca1 \u4f7f\u7528\u63d0\u793a"}),(0,p.jsx)(d.xv,{className:"tips-item",children:"\u2022 \u53ef\u9009\u62e9\u98df\u8c31\u7684\u65e5\u671f\u8303\u56f4\uff08\u4ece\u51e0\u53f7\u5230\u51e0\u53f7\uff09"}),(0,p.jsx)(d.xv,{className:"tips-item",children:"\u2022 \u70b9\u51fb\u83dc\u54c1\u540d\u79f0\u53f3\u4fa7\u7684\u270f\ufe0f\u53ef\u7f16\u8f91\u83dc\u540d"}),(0,p.jsx)(d.xv,{className:"tips-item",children:"\u2022 \u70b9\u51fb\u98df\u6750\u53ef\u7f16\u8f91\u540d\u79f0\u548c\u514b\u6570"}),(0,p.jsx)(d.xv,{className:"tips-item",children:'\u2022 \u70b9\u51fb"+ \u6dfb\u52a0\u98df\u6750"\u53ef\u65b0\u589e\u98df\u6750'}),(0,p.jsx)(d.xv,{className:"tips-item",children:"\u2022 \u98df\u6750\u603b\u91cf\u96c6\u4e2d\u663e\u793a\u5728\u98df\u8c31\u5e95\u90e8"}),(0,p.jsx)(d.xv,{className:"tips-item",children:'\u2022 \u5c55\u5f00"\u4e00\u5468\u98df\u6750\u603b\u91cf"\u53ef\u67e5\u770b\u91c7\u8d2d\u6e05\u5355'})]}),(0,p.jsx)(d.G7,{style:{height:"120rpx"}})]}):"current"===E?(0,p.jsx)(p.Fragment,{children:w&&w.days&&w.days.length>0?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.G7,{className:"day-tabs",children:nn.map(function(e,n){return(0,p.jsx)(d.G7,{className:"day-tab ".concat(C===n?"active":""),onClick:function(){return _(n)},children:(0,p.jsx)(d.xv,{className:"day-name",children:e})},e)})}),(0,p.jsxs)(d.pf,{className:"menu-content",scrollY:!0,children:[Sn(w.days[C]),w.nutritionSummary&&(0,p.jsxs)(d.G7,{className:"nutrition-card",children:[(0,p.jsx)(d.xv,{className:"nutrition-title",children:"\ud83d\udcca \u8425\u517b\u6982\u89c8"}),(0,p.jsxs)(d.G7,{className:"nutrition-items",children:[(0,p.jsxs)(d.G7,{className:"nutrition-item",children:[(0,p.jsx)(d.xv,{className:"value",children:w.nutritionSummary.avgEnergy}),(0,p.jsx)(d.xv,{className:"label",children:"\u5e73\u5747\u80fd\u91cf(kcal)"})]}),(0,p.jsxs)(d.G7,{className:"nutrition-item",children:[(0,p.jsx)(d.xv,{className:"value",children:w.nutritionSummary.avgProtein}),(0,p.jsx)(d.xv,{className:"label",children:"\u5e73\u5747\u86cb\u767d(g)"})]}),(0,p.jsxs)(d.G7,{className:"nutrition-item",children:[(0,p.jsx)(d.xv,{className:"value",children:w.nutritionSummary.varietyCount}),(0,p.jsx)(d.xv,{className:"label",children:"\u98df\u6750\u79cd\u7c7b"})]})]})]}),(0,p.jsx)(d.G7,{style:{height:"120rpx"}})]})]}):(0,p.jsxs)(d.G7,{className:"empty-state",children:[(0,p.jsx)(d.xv,{className:"empty-icon",children:"\ud83d\udced"}),(0,p.jsx)(d.xv,{className:"empty-title",children:"\u6682\u65e0\u98df\u8c31\u6570\u636e"}),(0,p.jsx)(d.xv,{className:"empty-hint",children:'\u70b9\u51fb\u53f3\u4e0a\u89d2"\u540c\u6b65"\u4ece\u4e91\u7aef\u83b7\u53d6\u6570\u636e'}),(0,p.jsx)(d.G7,{className:"sync-btn-big",onClick:fn,children:(0,p.jsx)(d.xv,{children:"\ud83d\udd04 \u7acb\u5373\u540c\u6b65"})})]})}):(0,p.jsxs)(d.pf,{className:"history-list",scrollY:!0,children:[G.filter(function(e){return"CONFIRMED"===e.status}).length>0?G.filter(function(e){return"CONFIRMED"===e.status}).map(function(e){var n;return(0,p.jsxs)(d.G7,{className:"history-card",onClick:function(){return Cn(e)},children:[(0,p.jsxs)(d.G7,{className:"history-header",children:[(0,p.jsx)(d.xv,{className:"history-campus",children:(null===(n=f[e.grade])||void 0===n?void 0:n.name)||e.grade}),(0,p.jsx)(d.xv,{className:"history-status",children:"\u5df2\u786e\u8ba4"})]}),(0,p.jsx)(d.xv,{className:"history-week",children:e.weekRange}),(0,p.jsxs)(d.G7,{className:"history-meta",children:[(0,p.jsxs)(d.xv,{className:"meta-item",children:["\ud83d\udc65 ",e.headcount,"\u4eba"]}),(0,p.jsxs)(d.xv,{className:"meta-item",children:["\ud83d\udcc5 ",new Date(e.createdAt).toLocaleDateString()]})]})]},e.id)}):(0,p.jsxs)(d.G7,{className:"empty-state",children:[(0,p.jsx)(d.xv,{className:"empty-icon",children:"\ud83d\udcda"}),(0,p.jsx)(d.xv,{className:"empty-title",children:"\u6682\u65e0\u5386\u53f2\u98df\u8c31"})]}),(0,p.jsx)(d.G7,{style:{height:"120rpx"}})]}),Ge&&Se&&(0,p.jsx)(d.G7,{className:"edit-modal-overlay",onClick:function(){return ke(!1)},children:(0,p.jsxs)(d.G7,{className:"edit-modal",onClick:function(e){return e.stopPropagation()},children:["dish"===Se.type?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.xv,{className:"modal-title",children:"\u270f\ufe0f \u7f16\u8f91\u83dc\u54c1\u540d\u79f0"}),(0,p.jsx)(d.II,{className:"edit-input",value:Ie,onInput:function(e){return Ze(e.detail.value)},placeholder:"\u8bf7\u8f93\u5165\u83dc\u54c1\u540d\u79f0",focus:!0})]}):(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(d.xv,{className:"modal-title",children:"addIngredient"===Se.type?"\u2795 \u6dfb\u52a0\u98df\u6750":"\u270f\ufe0f \u7f16\u8f91\u98df\u6750"}),(0,p.jsxs)(d.G7,{className:"edit-field",children:[(0,p.jsx)(d.xv,{className:"field-label",children:"\u98df\u6750\u540d\u79f0"}),(0,p.jsx)(d.II,{className:"edit-input",value:Ae,onInput:function(e){return Oe(e.detail.value)},placeholder:"\u5982\uff1a\u9e21\u86cb\u3001\u897f\u7ea2\u67ff",focus:"addIngredient"===Se.type})]}),(0,p.jsxs)(d.G7,{className:"edit-field",children:[(0,p.jsx)(d.xv,{className:"field-label",children:"\u6bcf\u4eba\u514b\u6570"}),(0,p.jsxs)(d.G7,{className:"grams-input-wrap",children:[(0,p.jsx)(d.II,{className:"edit-input grams",type:"digit",value:Fe,onInput:function(e){return Me(e.detail.value)},placeholder:"\u5982\uff1a30"}),(0,p.jsx)(d.xv,{className:"grams-unit",children:"g/\u4eba"})]})]})]}),(0,p.jsxs)(d.G7,{className:"modal-actions",children:[(0,p.jsx)(d.G7,{className:"modal-btn cancel",onClick:function(){return ke(!1)},children:(0,p.jsx)(d.xv,{children:"\u53d6\u6d88"})}),(0,p.jsx)(d.G7,{className:"modal-btn confirm",onClick:pn,children:(0,p.jsx)(d.xv,{children:"\u786e\u5b9a"})})]})]})})]})}var b={navigationBarTitleText:"\u672c\u5468\u98df\u8c31",navigationStyle:"custom",enableShareAppMessage:!0,enableShareTimeline:!0};S.enableShareTimeline=!0,S.enableShareAppMessage=!0;Page((0,a.createPageConfig)(S,"pages/kitchen/index",{root:{cn:[]}},b||{}))}},function(e){var n=function(n){return e(e.s=n)};e.O(0,[107,216,592],function(){return n(5437)});e.O()}]);