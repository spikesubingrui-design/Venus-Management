"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[539],{1727:function(e,a,s){var n=s(2180),t=s(1413),c=s(1002),l=s(3433),r=s(2688),i=s(5861),o=s(9439),d=s(7294),h=s(1515),x=s(2954),m=s.n(x),u=s(4751),v=s(4266),j=s(1977),p=s(5686),g=s(7724),N=s(5893),f={home:"\ud83c\udfe0",location:"\ud83d\udccd",search:"\ud83d\udd0d",menu:"\u2630",settings:"\u2699\ufe0f",refresh:"\ud83d\udd04",user:"\ud83d\udc64",users:"\ud83d\udc65",family:"\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67",teacher:"\ud83d\udc68\u200d\ud83c\udfeb",school:"\ud83c\udfeb",clipboard:"\ud83d\udccb","clipboard-check":"\ud83d\udcdd",attendance:"\u2705",thermometer:"\ud83c\udf21\ufe0f",heart:"\u2764\ufe0f",shield:"\ud83d\udee1\ufe0f","alert-triangle":"\u26a0\ufe0f",activity:"\ud83d\udc93",car:"\ud83d\ude97",bus:"\ud83d\ude8c",dollar:"\ud83d\udcb0",wallet:"\ud83d\udc5b","trending-up":"\ud83d\udcc8","trending-down":"\ud83d\udcc9",receipt:"\ud83e\uddfe",utensils:"\ud83c\udf74",meal:"\ud83c\udf7d\ufe0f",coffee:"\u2615",apple:"\ud83c\udf4e",file:"\ud83d\udcc4","file-text":"\ud83d\udcc3",folder:"\ud83d\udcc1",book:"\ud83d\udcd6",chart:"\ud83d\udcca","chart-pie":"\ud83d\udcca",phone:"\ud83d\udcf1",message:"\ud83d\udcac",bell:"\ud83d\udd14",mail:"\u2709\ufe0f",clock:"\u23f0",calendar:"\ud83d\udcc5",timer:"\u23f1\ufe0f",camera:"\ud83d\udcf7",image:"\ud83d\uddbc\ufe0f",video:"\ud83c\udfa5",seedling:"\ud83c\udf31",growth:"\ud83d\udcc8",award:"\ud83c\udfc6",star:"\u2b50",check:"\u2705",close:"\u274c",plus:"\u2795",minus:"\u2796",edit:"\u270f\ufe0f",delete:"\ud83d\uddd1\ufe0f",save:"\ud83d\udcbe",logout:"\ud83d\udeaa",eye:"\ud83d\udc41\ufe0f",lock:"\ud83d\udd12",unlock:"\ud83d\udd13",download:"\u2b07\ufe0f",upload:"\u2b06\ufe0f",share:"\ud83d\udce4",link:"\ud83d\udd17",globe:"\ud83c\udf10",sun:"\u2600\ufe0f",moon:"\ud83c\udf19",info:"\u2139\ufe0f",help:"\u2753",scale:"\u2696\ufe0f"},y={"\ud83c\udfe0":"home","\ud83d\udccd":"location","\ud83d\udd0d":"search","\u2699\ufe0f":"settings","\ud83d\udd04":"refresh","\ud83d\udc64":"user","\ud83d\udc65":"users","\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67":"family","\ud83d\udc6a":"family","\ud83d\udc68\u200d\ud83c\udfeb":"teacher","\ud83c\udfeb":"school","\ud83d\udccb":"clipboard","\ud83d\udcdd":"clipboard-check","\u2705":"attendance","\ud83c\udf21\ufe0f":"thermometer","\u2764\ufe0f":"heart","\ud83d\udee1\ufe0f":"shield","\u26a0\ufe0f":"alert-triangle","\ud83d\ude97":"car","\ud83d\ude8c":"bus","\ud83d\udcb0":"dollar","\ud83d\udc5b":"wallet","\ud83d\udcc8":"trending-up","\ud83d\udcc9":"trending-down","\ud83c\udf74":"utensils","\ud83c\udf72":"meal","\ud83e\udd57":"meal","\u2615":"coffee","\ud83d\udcc4":"file","\ud83d\udcc1":"folder","\ud83d\udcd6":"book","\ud83d\udcca":"chart","\ud83e\udded":"location","\ud83d\udcf1":"phone","\ud83d\udcac":"message","\ud83d\udd14":"bell","\u23f0":"clock","\ud83d\udcc5":"calendar","\ud83d\udcf7":"camera","\ud83c\udfa5":"video","\ud83c\udf31":"seedling","\ud83c\udfc6":"award","\u2b50":"star","\u270f\ufe0f":"edit","\ud83d\uddd1\ufe0f":"delete","\ud83d\udcbe":"save","\ud83d\udd12":"lock","\ud83d\udd13":"unlock","\ud83c\udf10":"globe"};function b(e){var a=e.name,s=e.size,n=void 0===s?48:s,t=e.color,c=void 0===t?"333333":t,l=e.className,r=void 0===l?"":l,i=e.onClick,o=y[a]||a,d=f[o]||a;return(0,N.jsx)(h.G7,{className:"icon-container ".concat(r),style:{width:"".concat(n,"rpx"),height:"".concat(n,"rpx")},onClick:i,children:(0,N.jsx)(h.xv,{className:"icon-text",style:{fontSize:"".concat(.6*n,"rpx"),color:"#".concat(c),lineHeight:"".concat(n,"rpx")},children:d})})}var k=s(6949);function G(){var e,a=(0,d.useState)({totalStudents:0,totalTeachers:0,todayPresent:0,todayAbsent:0,todaySick:0,todayLeave:0,todayLate:0,todayHealthRecords:0,todayHighTemp:0,monthPayments:0,recentPayments:[],classSummary:[],attendanceRate:0}),s=(0,o.Z)(a,2),n=s[0],f=s[1],y=(0,d.useState)(null),G=(0,o.Z)(y,2),S=G[0],w=G[1],C=(0,d.useState)(!1),Z=(0,o.Z)(C,2),T=Z[0],_=Z[1],I=(0,d.useState)(""),A=(0,o.Z)(I,2),P=A[0],D=A[1],R=(0,d.useState)(""),E=(0,o.Z)(R,2),H=E[0],L=E[1],M=(0,d.useState)([]),z=(0,o.Z)(M,2),O=z[0],J=z[1],K=(0,d.useState)(20),U=(0,o.Z)(K,2),B=U[0],F=U[1],q=(new Date).toISOString().split("T")[0];(0,u.Z)({title:"\u91d1\u661f\u5e7c\u513f\u56ed - \u667a\u6167\u6821\u56ed\u7ba1\u7406",path:"/pages/index/index"}),(0,d.useEffect)(function(){W(),Y();var e=m().getSystemInfoSync();F(e.statusBarHeight||20)},[]);var W=function(){var e=(0,i.Z)((0,r.Z)().m(function e(){var a,s;return(0,r.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:if(j.LC){e.n=1;break}return Q(),e.a(2);case 1:return e.p=1,e.n=2,(0,j.K)();case 2:a=e.v,a.success&&console.log("[Index] \u4e91\u7aef\u6570\u636e\u5df2\u5237\u65b0: ".concat(a.students,"\u5b66\u751f, ").concat(a.staff,"\u6559\u804c\u5de5")),e.n=4;break;case 3:e.p=3,s=e.v,console.log("[Index] \u4e91\u7aef\u5237\u65b0\u8df3\u8fc7:",s);case 4:Q();case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,i.Z)((0,r.Z)().m(function e(){var a,s;return(0,r.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:if(j.LC){e.n=1;break}return D("\u4e91\u7aef\u672a\u914d\u7f6e"),e.a(2);case 1:return _(!0),D(""),e.p=2,e.n=3,(0,j.K)();case 3:a=e.v,a.success?(Q(),m().showToast({title:"\u540c\u6b65\u6210\u529f: ".concat(a.students,"\u5b66\u751f, ").concat(a.staff,"\u6559\u804c\u5de5"),icon:"none",duration:3e3})):(D(a.error||"\u540c\u6b65\u5931\u8d25"),m().showToast({title:a.error||"\u540c\u6b65\u5931\u8d25",icon:"none"})),e.n=5;break;case 4:e.p=4,s=e.v,console.error("[Index] \u540c\u6b65\u5f02\u5e38:",s),D(s.message||"\u7f51\u7edc\u9519\u8bef");case 5:return e.p=5,_(!1),e.f(5);case 6:return e.a(2)}},e,null,[[2,4,5,6]])}));return function(){return e.apply(this,arguments)}}();(0,x.useDidShow)(function(){Q()});var Y=function(){var e=m().getStorageSync("kt_current_user");w(e),L((0,g.lk)(e)),J((0,g.A)(e))},Q=function(){var e=(0,i.Z)((0,r.Z)().m(function e(){var a,s,n,i,d,h,x,u,v,j,N,y,b,k,G,S,w,C,Z,T,_,I,A,P,D,R,E,H,L,M,z;return(0,r.Z)().w(function(e){while(1)switch(e.p=e.n){case 0:return a=m().getStorageSync("kt_students")||[],s=(0,g.vX)(a),n=m().getStorageSync("kt_staff")||[],i=m().getStorageSync("kt_teachers")||[],d=m().getStorageSync("kt_authorized_phones")||[],i.length>0&&(h=new Set(n.map(function(e){return e.phone||e.id})),x=i.filter(function(e){var a=e.phone||e.id;return a&&!h.has(a)}),x.length>0&&(n=[].concat((0,l.Z)(n),(0,l.Z)(x)),console.log("[Index] \u4ece kt_teachers \u8865\u5145: +".concat(x.length)))),d.length>0&&(u=new Set(n.map(function(e){return e.phone||e.id})),v=d.filter(function(e){var a="string"===typeof e?e:e.phone,s="object"===(0,c.Z)(e)&&e.role||"";return a&&"PARENT"!==s&&!u.has(a)}),v.length>0&&(j=v.map(function(e){var a="string"===typeof e?e:e.phone,s="object"===(0,c.Z)(e)&&e.name||a;return{id:"staff_".concat(a,"_").concat(Date.now()),name:s,phone:a,position:"object"===(0,c.Z)(e)&&(e.position||e.role)||"",class:"object"===(0,c.Z)(e)&&e.assignedClass||"",campus:"object"===(0,c.Z)(e)&&e.campus||"",role:"object"===(0,c.Z)(e)&&e.role||"",assignedClasses:"object"===(0,c.Z)(e)&&e.assignedClass?[e.assignedClass]:[],status:"active"}}),n=[].concat((0,l.Z)(n),(0,l.Z)(j)),m().setStorageSync("kt_staff",n),console.log("[Index] \u4ece kt_authorized_phones \u8865\u5145: +".concat(v.length,"\uff0c\u5df2\u540c\u6b65\u5230 kt_staff")))),N=m().getStorageSync("kt_attendance_".concat(q))||{},e.p=1,e.n=2,(0,p.aI)(q);case 2:y=e.v,y.success&&y.data&&Object.keys(y.data).length>0&&(N=(0,t.Z)((0,t.Z)({},N),y.data),m().setStorageSync("kt_attendance_".concat(q),N),console.log("[Index] \u8003\u52e4\u6570\u636e\u5df2\u4ece\u4e91\u7aef\u540c\u6b65:",Object.keys(y.data).length,"\u6761")),e.n=4;break;case 3:e.p=3,z=e.v,console.log("[Index] \u8003\u52e4\u4e91\u540c\u6b65\u8df3\u8fc7:",z);case 4:b=new Set(s.map(function(e){return e.id})),k=Object.entries(N).filter(function(e){var a=(0,o.Z)(e,1),s=a[0];return b.has(s)}),G=k.filter(function(e){var a=(0,o.Z)(e,2),s=a[1];return"present"===s.status}).length,S=k.filter(function(e){var a=(0,o.Z)(e,2),s=a[1];return"absent"===s.status}).length,w=k.filter(function(e){var a=(0,o.Z)(e,2),s=a[1];return"sick"===s.status}).length,C=k.filter(function(e){var a=(0,o.Z)(e,2),s=a[1];return"leave"===s.status}).length,Z=k.filter(function(e){var a=(0,o.Z)(e,2),s=a[1];return"late"===s.status}).length,k.length,T=s.length>0?Math.round((G+Z)/s.length*100):0,_=m().getStorageSync("kt_health_".concat(q))||{},I=Object.entries(_).filter(function(e){var a=(0,o.Z)(e,1),s=a[0];return b.has(s)}),A=I.length,P=I.filter(function(e){var a=(0,o.Z)(e,2),s=a[1],n=s.morningTemp||s.noonTemp||0;return n>37.3}).length,D=m().getStorageSync("kt_payments")||m().getStorageSync("kt_fee_payments")||[],R=(new Date).toISOString().slice(0,7),E=D.filter(function(e){var a;return null===(a=e.paymentDate)||void 0===a?void 0:a.startsWith(R)}),H=E.reduce(function(e,a){return e+(a.amount||0)},0),L=s.reduce(function(e,a){var s=a.class||a.className||"\u672a\u5206\u73ed";return e[s]=(e[s]||0)+1,e},{}),M=Object.entries(L).map(function(e){var a=(0,o.Z)(e,2),s=a[0],n=a[1];return{name:s,count:n}}),f({totalStudents:s.length,totalTeachers:n.length,todayPresent:G,todayAbsent:S,todaySick:w,todayLeave:C,todayLate:Z,todayHealthRecords:A,todayHighTemp:P,monthPayments:H,recentPayments:D.slice(0,5),classSummary:M,attendanceRate:T});case 5:return e.a(2)}},e,null,[[1,3]])}));return function(){return e.apply(this,arguments)}}(),V=(0,d.useMemo)(function(){var e=(null===S||void 0===S?void 0:S.role)||"TEACHER",a=[{icon:"attendance",label:"\u8003\u52e4",path:"/pages/students/attendance"},{icon:"thermometer",label:"\u5065\u5eb7",path:"/pages/students/health"},{icon:"car",label:"\u63a5\u9001",path:"/pages/students/pickup"},{icon:"wallet",label:"\u6536\u8d39",path:"/pages/finance/payment"},{icon:"users",label:"\u5b66\u751f",path:"/pages/students/index"},{icon:"teacher",label:"\u6559\u804c\u5de5",path:"/pages/staff/index"},{icon:"chart",label:"\u7edf\u8ba1",path:"/pages/students/stats"},{icon:"meal",label:"\u98df\u8c31",path:"/pages/kitchen/index"}],s=[{icon:"attendance",label:"\u8003\u52e4",path:"/pages/students/attendance"},{icon:"thermometer",label:"\u5065\u5eb7",path:"/pages/students/health"},{icon:"car",label:"\u63a5\u9001",path:"/pages/students/pickup"},{icon:"users",label:"\u5b66\u751f",path:"/pages/students/index"},{icon:"seedling",label:"\u6210\u957f",path:"/pages/growth/index"},{icon:"meal",label:"\u98df\u8c31",path:"/pages/kitchen/index"}],n=[{icon:"meal",label:"\u98df\u8c31\u7ba1\u7406",path:"/pages/kitchen/index"},{icon:"alert-triangle",label:"\u8fc7\u654f\u4fe1\u606f",path:"/pages/students/allergies"},{icon:"users",label:"\u7528\u9910\u4eba\u6570",path:"/pages/students/index"}],t=[{icon:"user",label:"\u6211\u7684\u5b69\u5b50",path:"/pages/growth/index"},{icon:"meal",label:"\u4eca\u65e5\u98df\u8c31",path:"/pages/kitchen/index"},{icon:"calendar",label:"\u8003\u52e4\u8bb0\u5f55",path:"/pages/students/attendance"},{icon:"receipt",label:"\u7f34\u8d39\u8bb0\u5f55",path:"/pages/finance/payment"}];switch(e){case"SUPER_ADMIN":case"ADMIN":return a;case"TEACHER":return s;case"KITCHEN":return n;case"PARENT":return t;default:return s}},[S]),$=function(e){(0,v.t)(e)},ee=function(e){var a=new Date(e);return"".concat(a.getMonth()+1,"\u6708").concat(a.getDate(),"\u65e5")};return(0,N.jsx)(h.G7,{className:"index-page",children:(0,N.jsxs)(h.pf,{className:"content",scrollY:!0,children:[(0,N.jsxs)(h.G7,{className:"page-header",style:{paddingTop:"".concat(B+8,"px")},children:[(0,N.jsxs)(h.G7,{className:"header-left",children:[(0,N.jsx)(h.Ee,{className:"logo-image",src:k,mode:"aspectFit"}),(0,N.jsxs)(h.G7,{className:"welcome-text",children:[(0,N.jsx)(h.xv,{className:"greeting",children:"\u6b22\u8fce\u56de\u6765"}),(0,N.jsx)(h.xv,{className:"user-name",children:(null===S||void 0===S?void 0:S.name)||"\u7528\u6237"})]})]}),(0,N.jsx)(h.G7,{className:"user-avatar",onClick:function(){return(0,v.t)("/pages/profile/index")},children:(0,N.jsx)(h.xv,{children:(null===S||void 0===S||null===(e=S.name)||void 0===e?void 0:e[0])||"\ud83d\udc64"})})]}),(0,N.jsx)(h.G7,{className:"quick-actions",children:V.map(function(e){return(0,N.jsxs)(h.G7,{className:"action-item",onClick:function(){return $(e.path)},children:[(0,N.jsx)(h.G7,{className:"icon-wrap",children:(0,N.jsx)(b,{name:e.icon,size:56,color:"ffffff"})}),(0,N.jsx)(h.xv,{className:"label",children:e.label})]},e.label)})}),(0===n.totalStudents||0===n.totalTeachers)&&(0,N.jsxs)(h.G7,{className:"section",style:{padding:"20rpx",background:"#fff8e6",borderRadius:"16rpx",marginBottom:"20rpx"},children:[(0,N.jsx)(h.xv,{style:{fontSize:"26rpx",color:"#666"},children:"\u6570\u636e\u4e3a\u7a7a\uff0c\u8bf7\u70b9\u51fb\u540c\u6b65"}),(0,N.jsx)(h.zx,{onClick:X,loading:T,style:{marginTop:"16rpx",background:"#4CAF50",color:"#fff",fontSize:"28rpx"},children:T?"\u540c\u6b65\u4e2d...":"\ud83d\udd04 \u4ece\u4e91\u7aef\u540c\u6b65\u6570\u636e"}),P&&(0,N.jsxs)(h.xv,{style:{color:"red",fontSize:"24rpx",marginTop:"10rpx"},children:["\u9519\u8bef: ",P]})]}),(0,N.jsxs)(h.G7,{className:"overview-section",children:[(0,N.jsxs)(h.G7,{className:"overview-header",children:[(0,N.jsxs)(h.G7,{className:"header-left",children:[(0,N.jsx)(h.xv,{className:"overview-title",children:"\ud83d\udcca \u4eca\u65e5\u6982\u89c8"}),(0,N.jsx)(h.xv,{className:"overview-date",children:(new Date).toLocaleDateString("zh-CN",{month:"long",day:"numeric",weekday:"short"})})]}),(0,N.jsx)(h.G7,{className:"sync-btn",onClick:X,children:(0,N.jsx)(h.xv,{children:T?"\u540c\u6b65\u4e2d...":"\ud83d\udd04"})})]}),H&&(0,N.jsxs)(h.G7,{className:"permission-bar",children:[(0,N.jsx)(h.xv,{className:"permission-icon",children:(0,g.GJ)(S)?"\ud83d\udc54":"\ud83d\udc69\u200d\ud83c\udfeb"}),(0,N.jsx)(h.xv,{className:"permission-text",children:H}),O.length>0&&!(0,g.GJ)(S)&&(0,N.jsxs)(h.G7,{className:"class-badges",children:[O.slice(0,3).map(function(e){return(0,N.jsx)(h.xv,{className:"class-badge",children:e},e)}),O.length>3&&(0,N.jsxs)(h.xv,{className:"class-badge more",children:["+",O.length-3]})]})]}),(0,N.jsxs)(h.G7,{className:"overview-cards",children:[(0,N.jsxs)(h.G7,{className:"overview-card students",onClick:function(){return(0,v.t)("/pages/students/index")},children:[(0,N.jsx)(h.G7,{className:"card-icon",children:"\ud83d\udc66"}),(0,N.jsxs)(h.G7,{className:"card-content",children:[(0,N.jsx)(h.xv,{className:"card-number",children:n.totalStudents}),(0,N.jsx)(h.xv,{className:"card-label",children:"\u5728\u56ed\u5b66\u751f"})]}),(0,N.jsx)(h.G7,{className:"card-arrow",children:"\u203a"})]}),(0,N.jsxs)(h.G7,{className:"overview-card teachers",onClick:function(){return(0,v.t)("/pages/staff/index")},children:[(0,N.jsx)(h.G7,{className:"card-icon",children:"\ud83d\udc69\u200d\ud83c\udfeb"}),(0,N.jsxs)(h.G7,{className:"card-content",children:[(0,N.jsx)(h.xv,{className:"card-number",children:n.totalTeachers}),(0,N.jsx)(h.xv,{className:"card-label",children:"\u6559\u804c\u5de5"})]}),(0,N.jsx)(h.G7,{className:"card-arrow",children:"\u203a"})]}),(0,N.jsxs)(h.G7,{className:"overview-card attendance",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.G7,{className:"card-icon",children:"\u2705"}),(0,N.jsxs)(h.G7,{className:"card-content",children:[(0,N.jsxs)(h.xv,{className:"card-number",children:[n.todayPresent,(0,N.jsx)(h.xv,{className:"card-unit",children:"\u4eba"})]}),(0,N.jsx)(h.xv,{className:"card-label",children:"\u4eca\u65e5\u51fa\u52e4"})]}),(0,N.jsx)(h.G7,{className:"attendance-bar",children:(0,N.jsx)(h.G7,{className:"bar-fill",style:{width:"".concat(n.attendanceRate,"%")}})}),(0,N.jsxs)(h.xv,{className:"attendance-rate",children:[n.attendanceRate,"%"]})]})]}),(0,g.GJ)(S)&&(0,N.jsxs)(h.G7,{className:"today-detail",children:[(0,N.jsx)(h.xv,{className:"detail-title",children:"\ud83d\udccb \u4eca\u65e5\u8be6\u60c5"}),(0,N.jsxs)(h.G7,{className:"detail-grid",children:[(0,N.jsxs)(h.G7,{className:"detail-item present",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\u2705"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todayPresent}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u51fa\u52e4"})]}),(0,N.jsxs)(h.G7,{className:"detail-item late",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\u23f0"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todayLate}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u8fdf\u5230"})]}),(0,N.jsxs)(h.G7,{className:"detail-item sick",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\ud83c\udfe5"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todaySick}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u75c5\u5047"})]}),(0,N.jsxs)(h.G7,{className:"detail-item leave",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\ud83d\udcdd"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todayLeave}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u4e8b\u5047"})]}),(0,N.jsxs)(h.G7,{className:"detail-item absent",onClick:function(){return(0,v.t)("/pages/students/attendance")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\u274c"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todayAbsent}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u7f3a\u52e4"})]}),(0,N.jsxs)(h.G7,{className:"detail-item health",onClick:function(){return(0,v.t)("/pages/students/health")},children:[(0,N.jsx)(h.xv,{className:"detail-icon",children:"\ud83d\udc8a"}),(0,N.jsx)(h.xv,{className:"detail-value",children:n.todayHealthRecords}),(0,N.jsx)(h.xv,{className:"detail-label",children:"\u5065\u5eb7\u8bb0\u5f55"})]})]}),n.todayHighTemp>0&&(0,N.jsxs)(h.G7,{className:"alert-bar",onClick:function(){return(0,v.t)("/pages/students/health")},children:[(0,N.jsx)(h.xv,{className:"alert-icon",children:"\ud83c\udf21\ufe0f"}),(0,N.jsxs)(h.xv,{className:"alert-text",children:["\u4eca\u65e5\u6709 ",n.todayHighTemp," \u540d\u5b66\u751f\u4f53\u6e29\u504f\u9ad8\uff08\uff1e37.3\xb0C\uff09"]}),(0,N.jsx)(h.xv,{className:"alert-arrow",children:"\u203a"})]})]}),"KITCHEN"===(null===S||void 0===S?void 0:S.role)&&(0,N.jsxs)(h.G7,{className:"kitchen-meal-section",children:[(0,N.jsx)(h.xv,{className:"section-title",children:"\ud83c\udf7d\ufe0f \u4eca\u65e5\u7528\u9910"}),(0,N.jsxs)(h.G7,{className:"meal-cards",children:[(0,N.jsxs)(h.G7,{className:"meal-card main",children:[(0,N.jsx)(h.G7,{className:"meal-icon",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,N.jsxs)(h.G7,{className:"meal-info",children:[(0,N.jsx)(h.xv,{className:"meal-number",children:n.todayPresent+n.todayLate}),(0,N.jsx)(h.xv,{className:"meal-label",children:"\u4eca\u65e5\u7528\u9910\u4eba\u6570"})]}),(0,N.jsxs)(h.xv,{className:"meal-hint",children:["\u51fa\u52e4 ",n.todayPresent," + \u8fdf\u5230 ",n.todayLate]})]}),(0,N.jsxs)(h.G7,{className:"meal-stats",children:[(0,N.jsxs)(h.G7,{className:"meal-stat",onClick:function(){return(0,v.t)("/pages/students/allergies")},children:[(0,N.jsx)(h.xv,{className:"stat-icon",children:"\u26a0\ufe0f"}),(0,N.jsx)(h.xv,{className:"stat-label",children:"\u8fc7\u654f\u4fe1\u606f"}),(0,N.jsx)(h.xv,{className:"stat-arrow",children:"\u203a"})]}),(0,N.jsxs)(h.G7,{className:"meal-stat",onClick:function(){return(0,v.t)("/pages/kitchen/index")},children:[(0,N.jsx)(h.xv,{className:"stat-icon",children:"\ud83d\udccb"}),(0,N.jsx)(h.xv,{className:"stat-label",children:"\u4eca\u65e5\u98df\u8c31"}),(0,N.jsx)(h.xv,{className:"stat-arrow",children:"\u203a"})]})]})]}),(0,N.jsxs)(h.G7,{className:"meal-time-hint",children:[(0,N.jsx)(h.xv,{className:"time-icon",children:"\ud83d\udd50"}),(0,N.jsxs)(h.xv,{className:"time-text",children:["\u6570\u636e\u66f4\u65b0\u65f6\u95f4: ",(new Date).toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})]})]})]})]}),n.classSummary.length>0&&(0,N.jsxs)(h.G7,{className:"section",children:[(0,N.jsxs)(h.G7,{className:"section-header",children:[(0,N.jsx)(h.xv,{className:"section-title",children:"\ud83c\udfeb \u73ed\u7ea7\u5206\u5e03"}),(0,N.jsx)(h.xv,{className:"more",onClick:function(){return(0,v.t)("/pages/students/index")},children:"\u67e5\u770b\u5168\u90e8 >"})]}),(0,N.jsx)(h.G7,{className:"class-grid",children:n.classSummary.map(function(e){return(0,N.jsxs)(h.G7,{className:"class-item clickable",onClick:function(){return(0,v.t)("/pages/students/index?class=".concat(encodeURIComponent(e.name)))},children:[(0,N.jsx)(h.xv,{className:"class-name",children:e.name}),(0,N.jsxs)(h.xv,{className:"class-count",children:[e.count,"\u4eba"]}),(0,N.jsx)(h.xv,{className:"class-arrow",children:"\u203a"})]},e.name)})})]}),n.recentPayments.length>0&&(0,N.jsxs)(h.G7,{className:"section",children:[(0,N.jsxs)(h.G7,{className:"section-header",children:[(0,N.jsx)(h.xv,{className:"section-title",children:"\ud83d\udcb3 \u6700\u8fd1\u7f34\u8d39"}),(0,N.jsx)(h.xv,{className:"more",onClick:function(){return(0,v.t)("/pages/finance/index")},children:"\u67e5\u770b\u5168\u90e8 >"})]}),(0,N.jsx)(h.G7,{className:"payment-list",children:n.recentPayments.map(function(e,a){return(0,N.jsxs)(h.G7,{className:"payment-item",children:[(0,N.jsxs)(h.G7,{className:"payment-info",children:[(0,N.jsx)(h.xv,{className:"student-name",children:e.studentName}),(0,N.jsx)(h.xv,{className:"payment-date",children:ee(e.paymentDate)})]}),(0,N.jsxs)(h.xv,{className:"payment-amount",children:["\xa5",e.amount.toLocaleString()]})]},a)})})]}),(0,N.jsxs)(h.G7,{className:"nav-section",children:[(0,N.jsx)(h.xv,{className:"nav-section-title",children:"\ud83e\udded \u529f\u80fd\u5bfc\u822a"}),(0,N.jsxs)(h.G7,{className:"nav-categories",children:[["SUPER_ADMIN","ADMIN","TEACHER"].includes(null===S||void 0===S?void 0:S.role)&&(0,N.jsxs)(h.G7,{className:"nav-category",children:[(0,N.jsx)(h.xv,{className:"category-title",children:"\u65e5\u5e38\u7ba1\u7406"}),(0,N.jsxs)(h.G7,{className:"category-items",children:[(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udccb"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u5b66\u751f\u6863\u6848"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/health")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83c\udf21\ufe0f"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u5065\u5eb7\u6253\u5361"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/pickup")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\ude97"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u63a5\u9001\u7ba1\u7406"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/growth/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83c\udf31"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u6210\u957f\u6863\u6848"})]})]})]}),["SUPER_ADMIN","ADMIN"].includes(null===S||void 0===S?void 0:S.role)&&(0,N.jsxs)(h.G7,{className:"nav-category",children:[(0,N.jsx)(h.xv,{className:"category-title",children:"\u56ed\u52a1\u7ba1\u7406"}),(0,N.jsxs)(h.G7,{className:"category-items",children:[(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return(0,v.t)("/pages/staff/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udc69\u200d\ud83c\udfeb"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u6559\u804c\u5de5"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/finance/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udcb0"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u8d22\u52a1\u62a5\u8868"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/stats")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udcca"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u6570\u636e\u7edf\u8ba1"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/disease")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udee1\ufe0f"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u75be\u75c5\u7ba1\u7406"})]})]})]}),["SUPER_ADMIN","ADMIN","KITCHEN"].includes(null===S||void 0===S?void 0:S.role)&&(0,N.jsxs)(h.G7,{className:"nav-category",children:[(0,N.jsx)(h.xv,{className:"category-title",children:"\u53a8\u623f\u7ba1\u7406"}),(0,N.jsxs)(h.G7,{className:"category-items",children:[(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/kitchen/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83c\udf7d\ufe0f"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u98df\u8c31\u7f16\u8f91"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/students/disinfect")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83e\uddf9"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u6d88\u6bd2\u8bb0\u5f55"})]})]})]}),(0,N.jsxs)(h.G7,{className:"nav-category",children:[(0,N.jsx)(h.xv,{className:"category-title",children:"\u66f4\u591a\u670d\u52a1"}),(0,N.jsxs)(h.G7,{className:"category-items",children:[(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/kitchen/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udcc5"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u672c\u5468\u98df\u8c31"})]}),(0,N.jsxs)(h.G7,{className:"nav-card",onClick:function(){return $("/pages/profile/index")},children:[(0,N.jsx)(h.xv,{className:"nav-emoji",children:"\ud83d\udc64"}),(0,N.jsx)(h.xv,{className:"nav-text",children:"\u4e2a\u4eba\u4e2d\u5fc3"})]})]})]})]})]}),(0,N.jsx)(h.G7,{style:{height:"40rpx"}})]})})}var S={navigationStyle:"custom",navigationBarTitleText:"",enableShareAppMessage:!0,enableShareTimeline:!0};G.enableShareTimeline=!0,G.enableShareAppMessage=!0;Page((0,n.createPageConfig)(G,"pages/index/index",{root:{cn:[]}},S||{}))}},function(e){var a=function(a){return e(e.s=a)};e.O(0,[107,216,592],function(){return a(1727)});e.O()}]);