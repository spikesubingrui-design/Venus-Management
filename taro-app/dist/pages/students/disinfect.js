"use strict";(wx["webpackJsonp"]=wx["webpackJsonp"]||[]).push([[496],{4682:function(e,s,a){var l=a(2180),c=a(3433),n=a(9439),i=a(7294),t=a(1515),r=a(2954),d=a.n(r),o=a(4751),x=a(4818),m=a(5893),h=["\u6258\u73ed","\u5c0f\u4e00\u73ed","\u5c0f\u4e8c\u73ed","\u4e2d\u4e00\u73ed","\u4e2d\u4e8c\u73ed","\u5927\u4e00\u73ed","\u5927\u4e8c\u73ed","\u516c\u5171\u533a\u57df"],u=["\u6559\u5ba4\u5730\u9762","\u684c\u6905","\u73a9\u5177","\u95e8\u628a\u624b","\u536b\u751f\u95f4","\u7761\u7720\u5ba4","\u76e5\u6d17\u5ba4","\u6237\u5916\u5668\u68b0","\u7a7a\u8c03\u6ee4\u7f51","\u5176\u4ed6"],j=["\u64e6\u62ed\u6d88\u6bd2","\u55b7\u6d12\u6d88\u6bd2","\u6d78\u6ce1\u6d88\u6bd2","\u7d2b\u5916\u7ebf\u6d88\u6bd2","\u81ed\u6c27\u6d88\u6bd2","\u901a\u98ce\u6362\u6c14"],N=["84\u6d88\u6bd2\u6db2","\u9152\u7cbe","\u8fc7\u6c27\u5316\u6c22","\u7d2b\u5916\u7ebf\u706f","\u81ed\u6c27\u673a","\u6e05\u6c34"];function v(){(0,o.Z)({title:"\u91d1\u661f\u5e7c\u513f\u56ed - \u6d88\u6bd2\u8bb0\u5f55",path:"/pages/students/disinfect"});var e=(new Date).toISOString().split("T")[0],s=(0,i.useState)([]),a=(0,n.Z)(s,2),l=a[0],r=a[1],v=(0,i.useState)(e),f=(0,n.Z)(v,2),p=f[0],G=f[1],b=(0,i.useState)(!1),y=(0,n.Z)(b,2),g=y[0],S=y[1],k=(0,i.useState)(""),w=(0,n.Z)(k,2),Z=w[0],C=w[1],I=(0,i.useState)("daily"),T=(0,n.Z)(I,2),A=T[0],_=T[1],D=(0,i.useState)([]),O=(0,n.Z)(D,2),J=O[0],M=O[1],P=(0,i.useState)(""),Y=(0,n.Z)(P,2),B=Y[0],E=Y[1],W=(0,i.useState)(""),q=(0,n.Z)(W,2),z=q[0],F=q[1],H=(0,i.useState)("30"),K=(0,n.Z)(H,2),L=K[0],Q=K[1],R=(0,i.useState)(""),U=(0,n.Z)(R,2),V=U[0],X=U[1],$=(0,i.useState)(!0),ee=(0,n.Z)($,2),se=ee[0],ae=ee[1],le=(0,i.useState)(""),ce=(0,n.Z)(le,2),ne=ce[0],ie=ce[1];(0,i.useEffect)(function(){te()},[]);var te=function(){var e=d().getStorageSync("kt_disinfect_records")||[];r(Array.isArray(e)?e:[])},re=function(){if(Z&&B&&z&&0!==J.length){var e={id:"disinfect_".concat(Date.now()),className:Z,date:p,time:(new Date).toTimeString().slice(0,5),type:A,areas:J,method:B,disinfectant:z,duration:parseInt(L)||30,operator:V||"\u6559\u5e08",ventilation:se,notes:ne,recordedAt:(new Date).toISOString()},s=[e].concat((0,c.Z)(l));r(s),d().setStorageSync("kt_disinfect_records",s),de(),d().showToast({title:"\u8bb0\u5f55\u5df2\u4fdd\u5b58",icon:"success"})}else d().showToast({title:"\u8bf7\u586b\u5199\u5b8c\u6574\u4fe1\u606f",icon:"none"})},de=function(){S(!1),C(""),_("daily"),M([]),E(""),F(""),Q("30"),X(""),ae(!0),ie("")},oe=function(e){M(function(s){return s.includes(e)?s.filter(function(s){return s!==e}):[].concat((0,c.Z)(s),[e])})},xe=l.filter(function(e){return e.date===p}),me={today:l.filter(function(s){return s.date===e}).length,daily:xe.filter(function(e){return"daily"===e.type}).length,weekly:xe.filter(function(e){return"weekly"===e.type}).length,special:xe.filter(function(e){return"special"===e.type}).length},he=function(e){var s={daily:"\u65e5\u5e38\u6d88\u6bd2",weekly:"\u5468\u6d88\u6bd2",special:"\u7279\u6b8a\u6d88\u6bd2"};return s[e]||e};return(0,m.jsxs)(t.G7,{className:"disinfect-page",children:[(0,m.jsx)(x.Z,{title:"\u6d88\u6bd2\u8bb0\u5f55",backgroundColor:"#0891b2"}),(0,m.jsx)(x.p,{}),(0,m.jsxs)(t.G7,{className:"header",children:[(0,m.jsxs)(t.G7,{className:"header-info",children:[(0,m.jsx)(t.xv,{className:"title",children:"\u6d88\u6bd2\u8bb0\u5f55"}),(0,m.jsx)(t.cW,{mode:"date",value:p,onChange:function(e){return G(e.detail.value)},children:(0,m.jsxs)(t.G7,{className:"date-picker",children:[(0,m.jsx)(t.xv,{children:p}),(0,m.jsx)(t.xv,{className:"arrow",children:"\u25bc"})]})})]}),(0,m.jsx)(t.G7,{className:"add-btn",onClick:function(){return S(!0)},children:(0,m.jsx)(t.xv,{children:"+ \u8bb0\u5f55"})})]}),(0,m.jsxs)(t.G7,{className:"stats-bar",children:[(0,m.jsxs)(t.G7,{className:"stat-item",children:[(0,m.jsx)(t.xv,{className:"number cyan",children:me.today}),(0,m.jsx)(t.xv,{className:"label",children:"\u4eca\u65e5\u6d88\u6bd2"})]}),(0,m.jsxs)(t.G7,{className:"stat-item",children:[(0,m.jsx)(t.xv,{className:"number",children:me.daily}),(0,m.jsx)(t.xv,{className:"label",children:"\u65e5\u5e38"})]}),(0,m.jsxs)(t.G7,{className:"stat-item",children:[(0,m.jsx)(t.xv,{className:"number blue",children:me.weekly}),(0,m.jsx)(t.xv,{className:"label",children:"\u5468\u6d88\u6bd2"})]}),(0,m.jsxs)(t.G7,{className:"stat-item",children:[(0,m.jsx)(t.xv,{className:"number red",children:me.special}),(0,m.jsx)(t.xv,{className:"label",children:"\u7279\u6b8a"})]})]}),(0,m.jsxs)(t.pf,{className:"record-list",scrollY:!0,children:[xe.map(function(e){return(0,m.jsxs)(t.G7,{className:"record-card ".concat(e.type),children:[(0,m.jsxs)(t.G7,{className:"card-header",children:[(0,m.jsxs)(t.G7,{className:"class-info",children:[(0,m.jsx)(t.xv,{className:"class-name",children:e.className}),(0,m.jsxs)(t.xv,{className:"time",children:[e.date," ",e.time]})]}),(0,m.jsx)(t.G7,{className:"type-tag ".concat(e.type),children:(0,m.jsx)(t.xv,{children:he(e.type)})})]}),(0,m.jsxs)(t.G7,{className:"card-body",children:[(0,m.jsxs)(t.G7,{className:"info-row",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u533a\u57df"}),(0,m.jsx)(t.G7,{className:"areas",children:e.areas.map(function(e,s){return(0,m.jsx)(t.xv,{className:"area-tag",children:e},s)})})]}),(0,m.jsxs)(t.G7,{className:"info-grid",children:[(0,m.jsxs)(t.G7,{className:"info-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u65b9\u5f0f"}),(0,m.jsx)(t.xv,{className:"value",children:e.method})]}),(0,m.jsxs)(t.G7,{className:"info-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u5242"}),(0,m.jsx)(t.xv,{className:"value",children:e.disinfectant})]}),(0,m.jsxs)(t.G7,{className:"info-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u65f6\u957f"}),(0,m.jsxs)(t.xv,{className:"value",children:[e.duration,"\u5206\u949f"]})]}),(0,m.jsxs)(t.G7,{className:"info-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u64cd\u4f5c\u4eba"}),(0,m.jsx)(t.xv,{className:"value",children:e.operator})]})]}),e.ventilation&&(0,m.jsx)(t.G7,{className:"ventilation-tag",children:(0,m.jsx)(t.xv,{children:"\u2713 \u5df2\u901a\u98ce"})}),e.notes&&(0,m.jsxs)(t.G7,{className:"notes",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u5907\u6ce8\uff1a"}),(0,m.jsx)(t.xv,{children:e.notes})]})]})]},e.id)}),0===xe.length&&(0,m.jsxs)(t.G7,{className:"empty-state",children:[(0,m.jsx)(t.xv,{className:"icon",children:"\ud83e\uddf9"}),(0,m.jsx)(t.xv,{className:"text",children:"\u8be5\u65e5\u671f\u6682\u65e0\u6d88\u6bd2\u8bb0\u5f55"})]})]}),g&&(0,m.jsxs)(t.G7,{className:"record-modal",children:[(0,m.jsx)(t.G7,{className:"modal-overlay",onClick:de}),(0,m.jsxs)(t.G7,{className:"modal-content",children:[(0,m.jsx)(t.G7,{className:"modal-header",children:(0,m.jsx)(t.xv,{className:"modal-title",children:"\u8bb0\u5f55\u6d88\u6bd2"})}),(0,m.jsxs)(t.pf,{className:"modal-body",scrollY:!0,children:[(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u73ed\u7ea7/\u533a\u57df *"}),(0,m.jsx)(t.G7,{className:"class-options",children:h.map(function(e){return(0,m.jsx)(t.G7,{className:"option ".concat(Z===e?"active":""),onClick:function(){return C(e)},children:(0,m.jsx)(t.xv,{children:e})},e)})})]}),(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u7c7b\u578b"}),(0,m.jsx)(t.G7,{className:"type-options",children:[{value:"daily",label:"\u65e5\u5e38\u6d88\u6bd2"},{value:"weekly",label:"\u5468\u6d88\u6bd2"},{value:"special",label:"\u7279\u6b8a\u6d88\u6bd2"}].map(function(e){return(0,m.jsx)(t.G7,{className:"option ".concat(A===e.value?"active":""),onClick:function(){return _(e.value)},children:(0,m.jsx)(t.xv,{children:e.label})},e.value)})})]}),(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u533a\u57df *\uff08\u53ef\u591a\u9009\uff09"}),(0,m.jsx)(t.G7,{className:"area-options",children:u.map(function(e){return(0,m.jsx)(t.G7,{className:"option ".concat(J.includes(e)?"active":""),onClick:function(){return oe(e)},children:(0,m.jsx)(t.xv,{children:e})},e)})})]}),(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u65b9\u5f0f *"}),(0,m.jsx)(t.G7,{className:"method-options",children:j.map(function(e){return(0,m.jsx)(t.G7,{className:"option ".concat(B===e?"active":""),onClick:function(){return E(e)},children:(0,m.jsx)(t.xv,{children:e})},e)})})]}),(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u5242 *"}),(0,m.jsx)(t.G7,{className:"disinfectant-options",children:N.map(function(e){return(0,m.jsx)(t.G7,{className:"option ".concat(z===e?"active":""),onClick:function(){return F(e)},children:(0,m.jsx)(t.xv,{children:e})},e)})})]}),(0,m.jsxs)(t.G7,{className:"form-row",children:[(0,m.jsxs)(t.G7,{className:"form-item half",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u6d88\u6bd2\u65f6\u957f\uff08\u5206\u949f\uff09"}),(0,m.jsx)(t.II,{className:"input",type:"number",placeholder:"30",value:L,onInput:function(e){return Q(e.detail.value)}})]}),(0,m.jsxs)(t.G7,{className:"form-item half",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u64cd\u4f5c\u4eba"}),(0,m.jsx)(t.II,{className:"input",placeholder:"\u586b\u5199\u59d3\u540d",value:V,onInput:function(e){return X(e.detail.value)}})]})]}),(0,m.jsx)(t.G7,{className:"form-item",children:(0,m.jsxs)(t.G7,{className:"checkbox-item ".concat(se?"checked":""),onClick:function(){return ae(!se)},children:[(0,m.jsx)(t.G7,{className:"checkbox",children:se&&(0,m.jsx)(t.xv,{children:"\u2713"})}),(0,m.jsx)(t.xv,{className:"checkbox-label",children:"\u6d88\u6bd2\u540e\u5df2\u5f00\u7a97\u901a\u98ce"})]})}),(0,m.jsxs)(t.G7,{className:"form-item",children:[(0,m.jsx)(t.xv,{className:"label",children:"\u5907\u6ce8"}),(0,m.jsx)(t.II,{className:"input",placeholder:"\u5176\u4ed6\u8bf4\u660e\uff08\u9009\u586b\uff09",value:ne,onInput:function(e){return ie(e.detail.value)}})]})]}),(0,m.jsxs)(t.G7,{className:"modal-footer",children:[(0,m.jsx)(t.G7,{className:"btn cancel",onClick:de,children:(0,m.jsx)(t.xv,{children:"\u53d6\u6d88"})}),(0,m.jsx)(t.G7,{className:"btn confirm",onClick:re,children:(0,m.jsx)(t.xv,{children:"\u4fdd\u5b58\u8bb0\u5f55"})})]})]})]})]})}var f={navigationBarTitleText:"\u6d88\u6bd2\u8bb0\u5f55",navigationStyle:"custom",enableShareAppMessage:!0,enableShareTimeline:!0};v.enableShareTimeline=!0,v.enableShareAppMessage=!0;Page((0,l.createPageConfig)(v,"pages/students/disinfect",{root:{cn:[]}},f||{}))}},function(e){var s=function(s){return e(e.s=s)};e.O(0,[107,216,592],function(){return s(4682)});e.O()}]);